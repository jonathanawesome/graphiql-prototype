var H=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var B=(e,s,a)=>s in e?H(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,F=(e,s)=>{for(var a in s||(s={}))ee.call(s,a)&&B(e,a,s[a]);if(O)for(var a of O(s))le.call(s,a)&&B(e,a,s[a]);return e},E=(e,s)=>X(e,Y(s));import{i as ae,k as J,m as ne,n as W,o as K,p as q,j as l,q as se,s as re,v as te,u as Q,a as p,r as N,w as S,F as _,K as y,x as z,y as ie,z as b,A as G,B as de,t as C}from"./index.192ea3d1.js";import{A as ue,i as oe,j as pe,k as ce,l as me,m as ve,n as he,o as fe,p as ye,q as ge,r as Ce,s as Te,t as we,S as xe,u as Fe,v as Ee,w as be,x as V,I as Ne,N as Ae,D as Se,y as ke,z as Ie,G as Re,J as Le,K as $e,Q as Me,U as Oe}from"./styles.812fe9cb.js";import{R as k,T as I,C as R}from"./index.module.c94f0ad7.js";import{C as Be}from"./Command.bd29b467.js";const qe=({inputType:e})=>{let s=e;for(;ae(s);)s=s.ofType;return s},L=({type:e})=>J(e)||ne(e)?e.getFields():W(e)?L({type:e.ofType}):K(e)?L({type:e.ofType}):null,$=({arg:e,addArg:s,onEdit:a,onInputTypeArg:n,removeArg:d,selection:c})=>{let t=null;if(q(e.type))t=l(j,{inputTypeArg:e,fields:e.type.getFields(),selection:c,onEdit:a});else if(K(e.type)||W(e.type)){const i=qe({inputType:e.type});se(i)?t=l(Z,{arg:e,addArg:s,onInputTypeArg:n,removeArg:d,selection:c}):q(i)?t=l(j,{inputTypeArg:e,fields:i.getFields(),selection:c,onEdit:a}):re(i)}else te(e.type)?t=l(Z,{arg:e,selection:c,addArg:s,removeArg:d,onInputTypeArg:n}):t=l("p",{style:{color:"red"},children:`yikes...something went wrong with this type ${e.type}`});return l(ue,{children:t})},Ge=()=>{const{schema:e}=Q();if(!e)return l("p",{children:"loading..."});const s=e.getQueryType(),a=e.getMutationType();return p(oe,{children:[p(pe,{children:[l("h2",{children:"Docs"}),p(ce,{children:[p(me,{onClick:()=>alert("FakeSearch...Todo!"),children:[l(Ze,{}),l("span",{children:"Search"}),l(Be,{}),l("span",{children:"K"})]}),l(ve,{onClick:()=>alert("Ellipsis...Todo!"),children:l(je,{})})]})]}),l(he,{children:p(fe,{children:[s?l(D,{rootType:s}):null,a?l(D,{rootType:a}):null]})})]})},U=({field:e,selectionSet:s,onEdit:a})=>{const[n,d]=N.exports.useState(null),[c,t]=N.exports.useState(!1),[i,g]=N.exports.useState(!1),o=L({type:e.type}),u=[...e.args],h=u.filter(r=>S(r)),v=u.filter(r=>!S(r));N.exports.useEffect(()=>{var f;const r=(f=s==null?void 0:s.selections)==null?void 0:f.find(x=>x.name.value===e.name);r?(d(r),t(!0)):(d(null),t(!1))},[s]);const m=({input:r})=>{if(!n)return null;const f=(()=>{const x=n.selectionSet?n.selectionSet:{kind:y.SELECTION_SET,selections:[]};return x.selections=z({original:x.selections,action:r}),x})();return a({input:{type:"updateField",payloads:{field:E(F({},n),{selectionSet:f})}}})},T=({argToAdd:r})=>{const f=ie({argumentName:r.name,variableName:`${e.name}${b({string:r.name})}`}),x=[...(n==null?void 0:n.arguments)||[],f],A=E(F({},n),{arguments:x});return a({input:{type:"updateField",payloads:{field:A,variableDefinitionToAdd:G({variableName:`${e.name}${b({string:r.name})}`,variableType:r.type.toString()})}}})},w=({argToRemove:r})=>{var A;const f=(A=n==null?void 0:n.arguments)==null?void 0:A.filter(P=>P.name.value!==r.name),x=E(F({},n),{arguments:f});return a({input:{type:"updateField",payloads:{field:x,variableNameToRemove:`${n==null?void 0:n.name.value}${b({string:r.name})}`}}})};return l(ye,{offset:!J(parent),children:p(k,{open:c,onOpenChange:t,children:[p(ge,{children:[l(Ce,{active:!!n,onClick:()=>{const r=!n;!r&&!c&&t(!1),r&&!c&&t(!0),!r&&c&&t(!1),r&&c&&t(!0),a(r?{input:{type:"addField",payloads:e}}:{input:{type:"removeField",payloads:{name:e.name}}})},children:l(De,{active:!!n})}),l(I,{children:l(M,{fieldOrArg:e,isCollapsible:!!o,isCollapsed:!c,isSelected:!!n})})]}),l(Te,{children:p(R,{children:[u.length>0&&p(k,{open:i,onOpenChange:g,children:[l(we,{children:h.length>0?h.sort().map(r=>l($,{addArg:T,arg:r,onInputTypeArg:null,removeArg:w,selection:n,onEdit:a},r.name)):null}),v.length>0&&p(_,{children:[l(I,{children:l(xe,{isArgsExpanded:i,optionalArgsCount:v.length,requiredArgsCount:h.length})}),l(R,{children:l(Fe,{children:v.length>0?v.sort().map(r=>l($,{addArg:T,arg:r,onInputTypeArg:null,removeArg:w,selection:n,onEdit:a},r.name)):null})})]})]}),o?l(Ee,{children:Object.keys(o).map(r=>l(U,{field:o[r],selectionSet:n==null?void 0:n.selectionSet,onEdit:m},o[r].name))}):null]})})]})})},M=({fieldOrArg:e,inlineDescription:s=!0,isCollapsed:a,isCollapsible:n,isSelected:d})=>p(be,{active:d,inlineDescription:s,type:"args"in e?"field":"argument",children:[n&&l(_,{children:"args"in e?l(V,{isExpanded:!a}):l(Ne,{isExpanded:!a,isSelected:d})}),p(Ae,{pointer:n,children:["args"in e?l("span",{children:e.name}):p("span",{children:[e.name,S(e)&&"*"]}),l("span",{children:e.type.toString()})]}),e.description&&p(Se,{children:[l(Je,{}),l("span",{children:e.description})]})]}),j=({inputTypeArg:e,fields:s,onEdit:a,selection:n})=>{var o;const[d,c]=N.exports.useState(!1),t=((o=n==null?void 0:n.arguments)==null?void 0:o.find(u=>u.name.value===e.name))||null;N.exports.useEffect(()=>{t&&c(!0)},[]);const i=({argToAdd:u})=>{var w;const h={kind:y.OBJECT_FIELD,name:{kind:y.NAME,value:u.name},value:{kind:y.VARIABLE,name:{kind:y.NAME,value:`${n==null?void 0:n.name.value}${b({string:e.name})}${b({string:u.name})}`}}};let v=null,m=null;t?(v=E(F({},t),{value:{kind:y.OBJECT,fields:[...t.value.fields,h]}}),m=[...((w=n==null?void 0:n.arguments)==null?void 0:w.filter(r=>r.name.value!==e.name))||[],v]):(v={kind:y.ARGUMENT,name:{kind:y.NAME,value:e.name},value:{kind:y.OBJECT,fields:[h]}},m=[...(n==null?void 0:n.arguments)||[],v]);const T=E(F({},n),{arguments:m});return a({input:{type:"updateField",payloads:{field:T,variableDefinitionToAdd:G({variableName:`${n==null?void 0:n.name.value}${b({string:e.name})}${b({string:u.name})}`,variableType:u.type.toString()})}}})},g=({argToRemove:u})=>{var m,T;let h=null;if((t==null?void 0:t.value).fields.length===1)h=((m=n==null?void 0:n.arguments)==null?void 0:m.filter(w=>w.name.value!==e.name))||null;else{const w=(t==null?void 0:t.value).fields.flatMap(f=>f.name.value!==u.name?f:[]),r=E(F({},t),{value:{kind:y.OBJECT,fields:w}});h=[...((T=n==null?void 0:n.arguments)==null?void 0:T.filter(f=>f.name.value!==e.name))||[],r]}const v=E(F({},n),{arguments:h||void 0});return a({input:{type:"updateField",payloads:{field:v,variableNameToRemove:`${n==null?void 0:n.name.value}${b({string:e.name})}${b({string:u.name})}`}}})};return l(ke,{children:p(k,{open:d,onOpenChange:c,children:[l(I,{children:l(M,{fieldOrArg:e,isCollapsible:!0,isCollapsed:!d,isSelected:!!t})}),l(R,{children:d&&l(Ie,{children:Object.keys(s).map(u=>l($,{addArg:i,arg:s[u],onInputTypeArg:e.name,removeArg:g,selection:n,onEdit:a},u))})})]})})},D=({rootType:e})=>{const{onEditDefinition:s,operationDefinition:a}=Q(),n=e.getFields(),[d,c]=N.exports.useState(!0),t=({input:i})=>{const g=(()=>{var h,v;if(i.type==="addField"){let m=null;return i.payloads.args.some(T=>S(T))&&(m=de({field:i.payloads,onlyRequired:!0})),m?a!=null&&a.variableDefinitions?[...a==null?void 0:a.variableDefinitions,...m]:[...m]:void 0}if(i.type==="removeField")return(h=a==null?void 0:a.variableDefinitions)==null?void 0:h.filter(m=>!m.variable.name.value.includes(i.payloads.name));if(i.type==="updateField"){if(i.payloads.variableNameToRemove)return(v=a==null?void 0:a.variableDefinitions)==null?void 0:v.filter(m=>!m.variable.name.value.includes(i.payloads.variableNameToRemove));if(i.payloads.variableDefinitionToAdd)return a!=null&&a.variableDefinitions?[...a==null?void 0:a.variableDefinitions,i.payloads.variableDefinitionToAdd]:[i.payloads.variableDefinitionToAdd]}})(),o=z({original:(a==null?void 0:a.selectionSet.selections)||[],action:i}),u=E(F({},a||{kind:y.OPERATION_DEFINITION,operation:e.name==="Mutation"?"mutation":"query",name:{kind:y.NAME,value:"ExampleQuery"}}),{variableDefinitions:g!=null?g:a==null?void 0:a.variableDefinitions,selectionSet:{kind:y.SELECTION_SET,selections:o}});o.length?s({nextDefinition:u}):s({nextDefinition:null})};return l(Re,{children:p(k,{open:d,onOpenChange:c,children:[l(I,{children:p(Le,{children:[l(V,{isExpanded:d}),l("span",{children:e.name})]})}),l($e,{children:l(R,{children:Object.keys(n).sort().map(i=>l(U,{field:n[i],onEdit:t,selectionSet:a==null?void 0:a.selectionSet},i))})})]})})},Z=({arg:e,addArg:s,onInputTypeArg:a,removeArg:n,selection:d})=>{const c=()=>{var i,g;let t=null;if(a){const o=((i=d==null?void 0:d.arguments)==null?void 0:i.find(u=>u.name.value===a))||null;t=o&&"fields"in(o==null?void 0:o.value)&&((g=o==null?void 0:o.value.fields)==null?void 0:g.find(u=>u.name.value===e.name))||null}else t=((d==null?void 0:d.arguments)||[]).find(o=>o.name.value===e.name)||null;return t};return p(Me,{children:[l("div",{onClick:()=>{!c()?s({argToAdd:e}):n({argToRemove:e})},children:l(Oe,{isSelected:!!c()})}),l(M,{fieldOrArg:e,isCollapsible:!1,isCollapsed:!1,isSelected:!!c()})]})},je=()=>p("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l("ellipse",{cx:"23.7893",cy:"3.78934",rx:"3.78934",ry:"3.78934",fill:C.colors.scale600.value}),l("circle",{cx:"23.7893",cy:"23.9989",r:"3.78934",fill:C.colors.scale600.value}),l("ellipse",{cx:"23.7893",cy:"44.2107",rx:"3.78934",ry:"3.78933",fill:C.colors.scale600.value})]}),De=({active:e})=>p("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l("path",{d:"M44.3077 23.9999C44.3077 35.2156 35.2156 44.3076 24 44.3076C12.7844 44.3076 3.69232 35.2156 3.69232 23.9999C3.69232 12.7843 12.7844 3.69226 24 3.69226C35.2156 3.69226 44.3077 12.7843 44.3077 23.9999Z",fill:e?C.colors.accentField.value:void 0}),l("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 44.3077C35.2156 44.3077 44.3077 35.2156 44.3077 24C44.3077 12.7844 35.2156 3.69231 24 3.69231C12.7844 3.69231 3.69231 12.7844 3.69231 24C3.69231 35.2156 12.7844 44.3077 24 44.3077ZM24 48C37.2548 48 48 37.2548 48 24C48 10.7452 37.2548 0 24 0C10.7452 0 0 10.7452 0 24C0 37.2548 10.7452 48 24 48Z",fill:e?C.colors.accentField.value:C.colors.scale600.value}),l("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.302 19.66L22.0166 32.9369L13.1723 24.1013L16.5647 20.7055L22.016 26.1515L31.909 16.2648L35.302 19.66Z",fill:e?C.colors.scale100.value:void 0})]}),Ze=()=>p("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5235 33.9708C27.5025 33.9708 33.9708 27.5025 33.9708 19.5235C33.9708 11.5444 27.5025 5.0761 19.5235 5.0761C11.5444 5.0761 5.0761 11.5444 5.0761 19.5235C5.0761 27.5025 11.5444 33.9708 19.5235 33.9708ZM19.5235 39.047C30.306 39.047 39.047 30.306 39.047 19.5235C39.047 8.74096 30.306 0 19.5235 0C8.74096 0 0 8.74096 0 19.5235C0 30.306 8.74096 39.047 19.5235 39.047Z",fill:C.colors.scale600.value}),l("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M44.0953 48L31.2376 35.1423L34.8269 31.5529L47.6847 44.4107L44.0953 48Z",fill:C.colors.scale600.value})]}),Je=()=>l("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l("circle",{cx:"24",cy:"24",r:"24",fill:C.colors.scale600.value})});export{Ge as E};
