var Kt=Object.defineProperty;var er=(e,t,i)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var M=(e,t,i)=>(er(e,typeof t!="symbol"?t+"":t,i),i);import{i as P,a as Q,b as ne,c as W,d as J,K as p,G as qe,e as Be,f as nr,g as N,h as Z,n as Ot,s as se,j as fe,p as Y,k as he,l as z,o as A,D as k,O as $e,q as Me,r as St,u as At,v as tr,w as rr,x as ie,y as De,z as Ft,A as Lt,B as tn,C as le,E as Rt,F as de,H as ir,I as Xe,J as ar,L as sr,M as kt,N as or,P as cr,Q as ur,R as fr,S as lr,T as vn,U as ce,V as dr,W as pr,X as mn,Y as hn,Z as En,_ as Tn,$ as Nn,a0 as yn,a1 as gr,a2 as vr,a3 as mr,a4 as hr,a5 as bn,a6 as B,a7 as te,a8 as Er}from"./index.9e8a633d.js";function ue(e,t,i){return t===i?!0:P(i)?P(t)?ue(e,t.ofType,i.ofType):!1:P(t)?ue(e,t.ofType,i):Q(i)?Q(t)?ue(e,t.ofType,i.ofType):!1:Q(t)?!1:ne(i)&&(W(t)||J(t))&&e.isSubType(i,t)}function In(e,t,i){return t===i?!0:ne(t)?ne(i)?e.getPossibleTypes(t).some(r=>e.isSubType(i,r)):e.isSubType(t,i):ne(i)?e.isSubType(i,t):!1}function q(e,t){switch(t.kind){case p.LIST_TYPE:{const i=q(e,t.type);return i&&new Be(i)}case p.NON_NULL_TYPE:{const i=q(e,t.type);return i&&new qe(i)}case p.NAMED_TYPE:return e.getType(t.name.value)}}function Tr(e){return{Document(t){for(const i of t.definitions)if(!nr(i)){const r=i.kind===p.SCHEMA_DEFINITION||i.kind===p.SCHEMA_EXTENSION?"schema":'"'+i.name.value+'"';e.reportError(new N(`The ${r} definition is not executable.`,{nodes:i}))}return!1}}}function Nr(e){return{Field(t){const i=e.getParentType();if(i&&!e.getFieldDef()){const n=e.getSchema(),a=t.name.value;let s=Z("to use an inline fragment on",yr(n,i,a));s===""&&(s=Z(br(i,a))),e.reportError(new N(`Cannot query field "${a}" on type "${i.name}".`+s,{nodes:t}))}}}}function yr(e,t,i){if(!ne(t))return[];const r=new Set,n=Object.create(null);for(const s of e.getPossibleTypes(t))if(!!s.getFields()[i]){r.add(s),n[s.name]=1;for(const o of s.getInterfaces()){var a;!o.getFields()[i]||(r.add(o),n[o.name]=((a=n[o.name])!==null&&a!==void 0?a:0)+1)}}return[...r].sort((s,o)=>{const c=n[o.name]-n[s.name];return c!==0?c:W(s)&&e.isSubType(s,o)?-1:W(o)&&e.isSubType(o,s)?1:Ot(s.name,o.name)}).map(s=>s.name)}function br(e,t){if(J(e)||W(e)){const i=Object.keys(e.getFields());return se(t,i)}return[]}function Ir(e){return{InlineFragment(t){const i=t.typeCondition;if(i){const r=q(e.getSchema(),i);if(r&&!fe(r)){const n=Y(i);e.reportError(new N(`Fragment cannot condition on non composite type "${n}".`,{nodes:i}))}}},FragmentDefinition(t){const i=q(e.getSchema(),t.typeCondition);if(i&&!fe(i)){const r=Y(t.typeCondition);e.reportError(new N(`Fragment "${t.name.value}" cannot condition on non composite type "${r}".`,{nodes:t.typeCondition}))}}}}function _r(e){return{...Ct(e),Argument(t){const i=e.getArgument(),r=e.getFieldDef(),n=e.getParentType();if(!i&&r&&n){const a=t.name.value,s=r.args.map(c=>c.name),o=se(a,s);e.reportError(new N(`Unknown argument "${a}" on field "${n.name}.${r.name}".`+Z(o),{nodes:t}))}}}}function Ct(e){const t=Object.create(null),i=e.getSchema(),r=i?i.getDirectives():he;for(const s of r)t[s.name]=s.args.map(o=>o.name);const n=e.getDocument().definitions;for(const s of n)if(s.kind===p.DIRECTIVE_DEFINITION){var a;const o=(a=s.arguments)!==null&&a!==void 0?a:[];t[s.name.value]=o.map(c=>c.name.value)}return{Directive(s){const o=s.name.value,c=t[o];if(s.arguments&&c)for(const f of s.arguments){const d=f.name.value;if(!c.includes(d)){const g=se(d,c);e.reportError(new N(`Unknown argument "${d}" on directive "@${o}".`+Z(g),{nodes:f}))}}return!1}}}function Vt(e){const t=Object.create(null),i=e.getSchema(),r=i?i.getDirectives():he;for(const a of r)t[a.name]=a.locations;const n=e.getDocument().definitions;for(const a of n)a.kind===p.DIRECTIVE_DEFINITION&&(t[a.name.value]=a.locations.map(s=>s.value));return{Directive(a,s,o,c,f){const d=a.name.value,g=t[d];if(!g){e.reportError(new N(`Unknown directive "@${d}".`,{nodes:a}));return}const h=Dr(f);h&&!g.includes(h)&&e.reportError(new N(`Directive "@${d}" may not be used on ${h}.`,{nodes:a}))}}}function Dr(e){const t=e[e.length-1];switch("kind"in t||z(!1),t.kind){case p.OPERATION_DEFINITION:return wr(t.operation);case p.FIELD:return k.FIELD;case p.FRAGMENT_SPREAD:return k.FRAGMENT_SPREAD;case p.INLINE_FRAGMENT:return k.INLINE_FRAGMENT;case p.FRAGMENT_DEFINITION:return k.FRAGMENT_DEFINITION;case p.VARIABLE_DEFINITION:return k.VARIABLE_DEFINITION;case p.SCHEMA_DEFINITION:case p.SCHEMA_EXTENSION:return k.SCHEMA;case p.SCALAR_TYPE_DEFINITION:case p.SCALAR_TYPE_EXTENSION:return k.SCALAR;case p.OBJECT_TYPE_DEFINITION:case p.OBJECT_TYPE_EXTENSION:return k.OBJECT;case p.FIELD_DEFINITION:return k.FIELD_DEFINITION;case p.INTERFACE_TYPE_DEFINITION:case p.INTERFACE_TYPE_EXTENSION:return k.INTERFACE;case p.UNION_TYPE_DEFINITION:case p.UNION_TYPE_EXTENSION:return k.UNION;case p.ENUM_TYPE_DEFINITION:case p.ENUM_TYPE_EXTENSION:return k.ENUM;case p.ENUM_VALUE_DEFINITION:return k.ENUM_VALUE;case p.INPUT_OBJECT_TYPE_DEFINITION:case p.INPUT_OBJECT_TYPE_EXTENSION:return k.INPUT_OBJECT;case p.INPUT_VALUE_DEFINITION:{const i=e[e.length-3];return"kind"in i||z(!1),i.kind===p.INPUT_OBJECT_TYPE_DEFINITION?k.INPUT_FIELD_DEFINITION:k.ARGUMENT_DEFINITION}default:z(!1,"Unexpected kind: "+A(t.kind))}}function wr(e){switch(e){case $e.QUERY:return k.QUERY;case $e.MUTATION:return k.MUTATION;case $e.SUBSCRIPTION:return k.SUBSCRIPTION}}function Or(e){return{FragmentSpread(t){const i=t.name.value;e.getFragment(i)||e.reportError(new N(`Unknown fragment "${i}".`,{nodes:t.name}))}}}function jt(e){const t=e.getSchema(),i=t?t.getTypeMap():Object.create(null),r=Object.create(null);for(const a of e.getDocument().definitions)Me(a)&&(r[a.name.value]=!0);const n=[...Object.keys(i),...Object.keys(r)];return{NamedType(a,s,o,c,f){const d=a.name.value;if(!i[d]&&!r[d]){var g;const h=(g=f[2])!==null&&g!==void 0?g:o,m=h!=null&&Sr(h);if(m&&_n.includes(d))return;const w=se(d,m?_n.concat(n):n);e.reportError(new N(`Unknown type "${d}".`+Z(w),{nodes:a}))}}}}const _n=[...St,...At].map(e=>e.name);function Sr(e){return"kind"in e&&(tr(e)||rr(e))}function Ar(e){let t=0;return{Document(i){t=i.definitions.filter(r=>r.kind===p.OPERATION_DEFINITION).length},OperationDefinition(i){!i.name&&t>1&&e.reportError(new N("This anonymous operation must be the only defined operation.",{nodes:i}))}}}function Fr(e){var t,i,r;const n=e.getSchema(),a=(t=(i=(r=n==null?void 0:n.astNode)!==null&&r!==void 0?r:n==null?void 0:n.getQueryType())!==null&&i!==void 0?i:n==null?void 0:n.getMutationType())!==null&&t!==void 0?t:n==null?void 0:n.getSubscriptionType();let s=0;return{SchemaDefinition(o){if(a){e.reportError(new N("Cannot define a new schema within a schema extension.",{nodes:o}));return}s>0&&e.reportError(new N("Must provide only one schema definition.",{nodes:o})),++s}}}function Lr(e){const t=Object.create(null),i=[],r=Object.create(null);return{OperationDefinition:()=>!1,FragmentDefinition(a){return n(a),!1}};function n(a){if(t[a.name.value])return;const s=a.name.value;t[s]=!0;const o=e.getFragmentSpreads(a.selectionSet);if(o.length!==0){r[s]=i.length;for(const c of o){const f=c.name.value,d=r[f];if(i.push(c),d===void 0){const g=e.getFragment(f);g&&n(g)}else{const g=i.slice(d),h=g.slice(0,-1).map(m=>'"'+m.name.value+'"').join(", ");e.reportError(new N(`Cannot spread fragment "${f}" within itself`+(h!==""?` via ${h}.`:"."),{nodes:g}))}i.pop()}r[s]=void 0}}}function Rr(e){let t=Object.create(null);return{OperationDefinition:{enter(){t=Object.create(null)},leave(i){const r=e.getRecursiveVariableUsages(i);for(const{node:n}of r){const a=n.name.value;t[a]!==!0&&e.reportError(new N(i.name?`Variable "$${a}" is not defined by operation "${i.name.value}".`:`Variable "$${a}" is not defined.`,{nodes:[n,i]}))}}},VariableDefinition(i){t[i.variable.name.value]=!0}}}function kr(e){const t=[],i=[];return{OperationDefinition(r){return t.push(r),!1},FragmentDefinition(r){return i.push(r),!1},Document:{leave(){const r=Object.create(null);for(const n of t)for(const a of e.getRecursivelyReferencedFragments(n))r[a.name.value]=!0;for(const n of i){const a=n.name.value;r[a]!==!0&&e.reportError(new N(`Fragment "${a}" is never used.`,{nodes:n}))}}}}}function Cr(e){let t=[];return{OperationDefinition:{enter(){t=[]},leave(i){const r=Object.create(null),n=e.getRecursiveVariableUsages(i);for(const{node:a}of n)r[a.name.value]=!0;for(const a of t){const s=a.variable.name.value;r[s]!==!0&&e.reportError(new N(i.name?`Variable "$${s}" is never used in operation "${i.name.value}".`:`Variable "$${s}" is never used.`,{nodes:a}))}}},VariableDefinition(i){t.push(i)}}}function rn(e){switch(e.kind){case p.OBJECT:return{...e,fields:Vr(e.fields)};case p.LIST:return{...e,values:e.values.map(rn)};case p.INT:case p.FLOAT:case p.STRING:case p.BOOLEAN:case p.NULL:case p.ENUM:case p.VARIABLE:return e}}function Vr(e){return e.map(t=>({...t,value:rn(t.value)})).sort((t,i)=>Ot(t.name.value,i.name.value))}function Mt(e){return Array.isArray(e)?e.map(([t,i])=>`subfields "${t}" conflict because `+Mt(i)).join(" and "):e}function jr(e){const t=new xr,i=new Map;return{SelectionSet(r){const n=Mr(e,i,t,e.getParentType(),r);for(const[[a,s],o,c]of n){const f=Mt(s);e.reportError(new N(`Fields "${a}" conflict because ${f}. Use different aliases on the fields to fetch both if this was intentional.`,{nodes:o.concat(c)}))}}}}function Mr(e,t,i,r,n){const a=[],[s,o]=Se(e,t,r,n);if(Pr(e,a,t,i,s),o.length!==0)for(let c=0;c<o.length;c++){we(e,a,t,i,!1,s,o[c]);for(let f=c+1;f<o.length;f++)Oe(e,a,t,i,!1,o[c],o[f])}return a}function we(e,t,i,r,n,a,s){const o=e.getFragment(s);if(!o)return;const[c,f]=Qe(e,i,o);if(a!==c){an(e,t,i,r,n,a,c);for(const d of f)r.has(d,s,n)||(r.add(d,s,n),we(e,t,i,r,n,a,d))}}function Oe(e,t,i,r,n,a,s){if(a===s||r.has(a,s,n))return;r.add(a,s,n);const o=e.getFragment(a),c=e.getFragment(s);if(!o||!c)return;const[f,d]=Qe(e,i,o),[g,h]=Qe(e,i,c);an(e,t,i,r,n,f,g);for(const m of h)Oe(e,t,i,r,n,a,m);for(const m of d)Oe(e,t,i,r,n,m,s)}function Ur(e,t,i,r,n,a,s,o){const c=[],[f,d]=Se(e,t,n,a),[g,h]=Se(e,t,s,o);an(e,c,t,i,r,f,g);for(const m of h)we(e,c,t,i,r,f,m);for(const m of d)we(e,c,t,i,r,g,m);for(const m of d)for(const w of h)Oe(e,c,t,i,r,m,w);return c}function Pr(e,t,i,r,n){for(const[a,s]of Object.entries(n))if(s.length>1)for(let o=0;o<s.length;o++)for(let c=o+1;c<s.length;c++){const f=Ut(e,i,r,!1,a,s[o],s[c]);f&&t.push(f)}}function an(e,t,i,r,n,a,s){for(const[o,c]of Object.entries(a)){const f=s[o];if(f)for(const d of c)for(const g of f){const h=Ut(e,i,r,n,o,d,g);h&&t.push(h)}}}function Ut(e,t,i,r,n,a,s){const[o,c,f]=a,[d,g,h]=s,m=r||o!==d&&J(o)&&J(d);if(!m){const K=c.name.value,Te=g.name.value;if(K!==Te)return[[n,`"${K}" and "${Te}" are different fields`],[c],[g]];if(Dn(c)!==Dn(g))return[[n,"they have differing arguments"],[c],[g]]}const w=f==null?void 0:f.type,C=h==null?void 0:h.type;if(w&&C&&Ge(w,C))return[[n,`they return conflicting types "${A(w)}" and "${A(C)}"`],[c],[g]];const U=c.selectionSet,Ee=g.selectionSet;if(U&&Ee){const K=Ur(e,t,i,m,ie(w),U,ie(C),Ee);return $r(K,n,c,g)}}function Dn(e){var t;const i=(t=e.arguments)!==null&&t!==void 0?t:[],r={kind:p.OBJECT,fields:i.map(n=>({kind:p.OBJECT_FIELD,name:n.name,value:n.value}))};return Y(rn(r))}function Ge(e,t){return Q(e)?Q(t)?Ge(e.ofType,t.ofType):!0:Q(t)?!0:P(e)?P(t)?Ge(e.ofType,t.ofType):!0:P(t)?!0:De(e)||De(t)?e!==t:!1}function Se(e,t,i,r){const n=t.get(r);if(n)return n;const a=Object.create(null),s=Object.create(null);Pt(e,i,r,a,s);const o=[a,Object.keys(s)];return t.set(r,o),o}function Qe(e,t,i){const r=t.get(i.selectionSet);if(r)return r;const n=q(e.getSchema(),i.typeCondition);return Se(e,t,n,i.selectionSet)}function Pt(e,t,i,r,n){for(const a of i.selections)switch(a.kind){case p.FIELD:{const s=a.name.value;let o;(J(t)||W(t))&&(o=t.getFields()[s]);const c=a.alias?a.alias.value:s;r[c]||(r[c]=[]),r[c].push([t,a,o]);break}case p.FRAGMENT_SPREAD:n[a.name.value]=!0;break;case p.INLINE_FRAGMENT:{const s=a.typeCondition,o=s?q(e.getSchema(),s):t;Pt(e,o,a.selectionSet,r,n);break}}}function $r(e,t,i,r){if(e.length>0)return[[t,e.map(([n])=>n)],[i,...e.map(([,n])=>n).flat()],[r,...e.map(([,,n])=>n).flat()]]}class xr{constructor(){this._data=new Map}has(t,i,r){var n;const[a,s]=t<i?[t,i]:[i,t],o=(n=this._data.get(a))===null||n===void 0?void 0:n.get(s);return o===void 0?!1:r?!0:r===o}add(t,i,r){const[n,a]=t<i?[t,i]:[i,t],s=this._data.get(n);s===void 0?this._data.set(n,new Map([[a,r]])):s.set(a,r)}}function Yr(e){return{InlineFragment(t){const i=e.getType(),r=e.getParentType();if(fe(i)&&fe(r)&&!In(e.getSchema(),i,r)){const n=A(r),a=A(i);e.reportError(new N(`Fragment cannot be spread here as objects of type "${n}" can never be of type "${a}".`,{nodes:t}))}},FragmentSpread(t){const i=t.name.value,r=qr(e,i),n=e.getParentType();if(r&&n&&!In(e.getSchema(),r,n)){const a=A(n),s=A(r);e.reportError(new N(`Fragment "${i}" cannot be spread here as objects of type "${a}" can never be of type "${s}".`,{nodes:t}))}}}}function qr(e,t){const i=e.getFragment(t);if(i){const r=q(e.getSchema(),i.typeCondition);if(fe(r))return r}}function Br(e){const t=e.getSchema(),i=Object.create(null);for(const n of e.getDocument().definitions)Me(n)&&(i[n.name.value]=n);return{ScalarTypeExtension:r,ObjectTypeExtension:r,InterfaceTypeExtension:r,UnionTypeExtension:r,EnumTypeExtension:r,InputObjectTypeExtension:r};function r(n){const a=n.name.value,s=i[a],o=t==null?void 0:t.getType(a);let c;if(s?c=Xr[s.kind]:o&&(c=Gr(o)),c){if(c!==n.kind){const f=Qr(n.kind);e.reportError(new N(`Cannot extend non-${f} type "${a}".`,{nodes:s?[s,n]:n}))}}else{const f=Object.keys({...i,...t==null?void 0:t.getTypeMap()}),d=se(a,f);e.reportError(new N(`Cannot extend type "${a}" because it is not defined.`+Z(d),{nodes:n.name}))}}}const Xr={[p.SCALAR_TYPE_DEFINITION]:p.SCALAR_TYPE_EXTENSION,[p.OBJECT_TYPE_DEFINITION]:p.OBJECT_TYPE_EXTENSION,[p.INTERFACE_TYPE_DEFINITION]:p.INTERFACE_TYPE_EXTENSION,[p.UNION_TYPE_DEFINITION]:p.UNION_TYPE_EXTENSION,[p.ENUM_TYPE_DEFINITION]:p.ENUM_TYPE_EXTENSION,[p.INPUT_OBJECT_TYPE_DEFINITION]:p.INPUT_OBJECT_TYPE_EXTENSION};function Gr(e){if(Ft(e))return p.SCALAR_TYPE_EXTENSION;if(J(e))return p.OBJECT_TYPE_EXTENSION;if(W(e))return p.INTERFACE_TYPE_EXTENSION;if(Lt(e))return p.UNION_TYPE_EXTENSION;if(tn(e))return p.ENUM_TYPE_EXTENSION;if(le(e))return p.INPUT_OBJECT_TYPE_EXTENSION;z(!1,"Unexpected type: "+A(e))}function Qr(e){switch(e){case p.SCALAR_TYPE_EXTENSION:return"scalar";case p.OBJECT_TYPE_EXTENSION:return"object";case p.INTERFACE_TYPE_EXTENSION:return"interface";case p.UNION_TYPE_EXTENSION:return"union";case p.ENUM_TYPE_EXTENSION:return"enum";case p.INPUT_OBJECT_TYPE_EXTENSION:return"input object";default:z(!1,"Unexpected kind: "+A(e))}}function Wr(e){return{...$t(e),Field:{leave(t){var i;const r=e.getFieldDef();if(!r)return!1;const n=new Set((i=t.arguments)===null||i===void 0?void 0:i.map(a=>a.name.value));for(const a of r.args)if(!n.has(a.name)&&Rt(a)){const s=A(a.type);e.reportError(new N(`Field "${r.name}" argument "${a.name}" of type "${s}" is required, but it was not provided.`,{nodes:t}))}}}}}function $t(e){var t;const i=Object.create(null),r=e.getSchema(),n=(t=r==null?void 0:r.getDirectives())!==null&&t!==void 0?t:he;for(const o of n)i[o.name]=de(o.args.filter(Rt),c=>c.name);const a=e.getDocument().definitions;for(const o of a)if(o.kind===p.DIRECTIVE_DEFINITION){var s;const c=(s=o.arguments)!==null&&s!==void 0?s:[];i[o.name.value]=de(c.filter(Jr),f=>f.name.value)}return{Directive:{leave(o){const c=o.name.value,f=i[c];if(f){var d;const g=(d=o.arguments)!==null&&d!==void 0?d:[],h=new Set(g.map(m=>m.name.value));for(const[m,w]of Object.entries(f))if(!h.has(m)){const C=ir(w.type)?A(w.type):Y(w.type);e.reportError(new N(`Directive "@${c}" argument "${m}" of type "${C}" is required, but it was not provided.`,{nodes:o}))}}}}}}function Jr(e){return e.type.kind===p.NON_NULL_TYPE&&e.defaultValue==null}function Hr(e){return{Field(t){const i=e.getType(),r=t.selectionSet;if(i){if(De(ie(i))){if(r){const n=t.name.value,a=A(i);e.reportError(new N(`Field "${n}" must not have a selection since type "${a}" has no subfields.`,{nodes:r}))}}else if(!r){const n=t.name.value,a=A(i);e.reportError(new N(`Field "${n}" of type "${a}" must have a selection of subfields. Did you mean "${n} { ... }"?`,{nodes:t}))}}}}}function zr(e,t,i){var r;const n={},a=(r=t.arguments)!==null&&r!==void 0?r:[],s=de(a,o=>o.name.value);for(const o of e.args){const c=o.name,f=o.type,d=s[c];if(!d){if(o.defaultValue!==void 0)n[c]=o.defaultValue;else if(P(f))throw new N(`Argument "${c}" of required type "${A(f)}" was not provided.`,{nodes:t});continue}const g=d.value;let h=g.kind===p.NULL;if(g.kind===p.VARIABLE){const w=g.name.value;if(i==null||!Zr(i,w)){if(o.defaultValue!==void 0)n[c]=o.defaultValue;else if(P(f))throw new N(`Argument "${c}" of required type "${A(f)}" was provided the variable "$${w}" which was not provided a runtime value.`,{nodes:g});continue}h=i[w]==null}if(h&&P(f))throw new N(`Argument "${c}" of non-null type "${A(f)}" must not be null.`,{nodes:g});const m=Xe(g,f,i);if(m===void 0)throw new N(`Argument "${c}" has invalid value ${Y(g)}.`,{nodes:g});n[c]=m}return n}function Ae(e,t,i){var r;const n=(r=t.directives)===null||r===void 0?void 0:r.find(a=>a.name.value===e.name);if(n)return zr(e,n,i)}function Zr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Kr(e,t,i,r,n){const a=new Map;return We(e,t,i,r,n,a,new Set),a}function We(e,t,i,r,n,a,s){for(const o of n.selections)switch(o.kind){case p.FIELD:{if(!xe(i,o))continue;const c=ei(o),f=a.get(c);f!==void 0?f.push(o):a.set(c,[o]);break}case p.INLINE_FRAGMENT:{if(!xe(i,o)||!wn(e,o,r))continue;We(e,t,i,r,o.selectionSet,a,s);break}case p.FRAGMENT_SPREAD:{const c=o.name.value;if(s.has(c)||!xe(i,o))continue;s.add(c);const f=t[c];if(!f||!wn(e,f,r))continue;We(e,t,i,r,f.selectionSet,a,s);break}}}function xe(e,t){const i=Ae(ar,t,e);if((i==null?void 0:i.if)===!0)return!1;const r=Ae(sr,t,e);return(r==null?void 0:r.if)!==!1}function wn(e,t,i){const r=t.typeCondition;if(!r)return!0;const n=q(e,r);return n===i?!0:ne(n)?e.isSubType(n,i):!1}function ei(e){return e.alias?e.alias.value:e.name.value}function ni(e){return{OperationDefinition(t){if(t.operation==="subscription"){const i=e.getSchema(),r=i.getSubscriptionType();if(r){const n=t.name?t.name.value:null,a=Object.create(null),s=e.getDocument(),o=Object.create(null);for(const f of s.definitions)f.kind===p.FRAGMENT_DEFINITION&&(o[f.name.value]=f);const c=Kr(i,o,a,r,t.selectionSet);if(c.size>1){const g=[...c.values()].slice(1).flat();e.reportError(new N(n!=null?`Subscription "${n}" must select only one top level field.`:"Anonymous Subscription must select only one top level field.",{nodes:g}))}for(const f of c.values())f[0].name.value.startsWith("__")&&e.reportError(new N(n!=null?`Subscription "${n}" must not select an introspection top level field.`:"Anonymous Subscription must not select an introspection top level field.",{nodes:f}))}}}}}function sn(e,t){const i=new Map;for(const r of e){const n=t(r),a=i.get(n);a===void 0?i.set(n,[r]):a.push(r)}return i}function ti(e){return{DirectiveDefinition(r){var n;const a=(n=r.arguments)!==null&&n!==void 0?n:[];return i(`@${r.name.value}`,a)},InterfaceTypeDefinition:t,InterfaceTypeExtension:t,ObjectTypeDefinition:t,ObjectTypeExtension:t};function t(r){var n;const a=r.name.value,s=(n=r.fields)!==null&&n!==void 0?n:[];for(const c of s){var o;const f=c.name.value,d=(o=c.arguments)!==null&&o!==void 0?o:[];i(`${a}.${f}`,d)}return!1}function i(r,n){const a=sn(n,s=>s.name.value);for(const[s,o]of a)o.length>1&&e.reportError(new N(`Argument "${r}(${s}:)" can only be defined once.`,{nodes:o.map(c=>c.name)}));return!1}}function xt(e){return{Field:t,Directive:t};function t(i){var r;const n=(r=i.arguments)!==null&&r!==void 0?r:[],a=sn(n,s=>s.name.value);for(const[s,o]of a)o.length>1&&e.reportError(new N(`There can be only one argument named "${s}".`,{nodes:o.map(c=>c.name)}))}}function ri(e){const t=Object.create(null),i=e.getSchema();return{DirectiveDefinition(r){const n=r.name.value;if(i!=null&&i.getDirective(n)){e.reportError(new N(`Directive "@${n}" already exists in the schema. It cannot be redefined.`,{nodes:r.name}));return}return t[n]?e.reportError(new N(`There can be only one directive named "@${n}".`,{nodes:[t[n],r.name]})):t[n]=r.name,!1}}}function Yt(e){const t=Object.create(null),i=e.getSchema(),r=i?i.getDirectives():he;for(const o of r)t[o.name]=!o.isRepeatable;const n=e.getDocument().definitions;for(const o of n)o.kind===p.DIRECTIVE_DEFINITION&&(t[o.name.value]=!o.repeatable);const a=Object.create(null),s=Object.create(null);return{enter(o){if(!("directives"in o)||!o.directives)return;let c;if(o.kind===p.SCHEMA_DEFINITION||o.kind===p.SCHEMA_EXTENSION)c=a;else if(Me(o)||kt(o)){const f=o.name.value;c=s[f],c===void 0&&(s[f]=c=Object.create(null))}else c=Object.create(null);for(const f of o.directives){const d=f.name.value;t[d]&&(c[d]?e.reportError(new N(`The directive "@${d}" can only be used once at this location.`,{nodes:[c[d],f]})):c[d]=f)}}}}function ii(e){const t=e.getSchema(),i=t?t.getTypeMap():Object.create(null),r=Object.create(null);return{EnumTypeDefinition:n,EnumTypeExtension:n};function n(a){var s;const o=a.name.value;r[o]||(r[o]=Object.create(null));const c=(s=a.values)!==null&&s!==void 0?s:[],f=r[o];for(const d of c){const g=d.name.value,h=i[o];tn(h)&&h.getValue(g)?e.reportError(new N(`Enum value "${o}.${g}" already exists in the schema. It cannot also be defined in this type extension.`,{nodes:d.name})):f[g]?e.reportError(new N(`Enum value "${o}.${g}" can only be defined once.`,{nodes:[f[g],d.name]})):f[g]=d.name}return!1}}function ai(e){const t=e.getSchema(),i=t?t.getTypeMap():Object.create(null),r=Object.create(null);return{InputObjectTypeDefinition:n,InputObjectTypeExtension:n,InterfaceTypeDefinition:n,InterfaceTypeExtension:n,ObjectTypeDefinition:n,ObjectTypeExtension:n};function n(a){var s;const o=a.name.value;r[o]||(r[o]=Object.create(null));const c=(s=a.fields)!==null&&s!==void 0?s:[],f=r[o];for(const d of c){const g=d.name.value;si(i[o],g)?e.reportError(new N(`Field "${o}.${g}" already exists in the schema. It cannot also be defined in this type extension.`,{nodes:d.name})):f[g]?e.reportError(new N(`Field "${o}.${g}" can only be defined once.`,{nodes:[f[g],d.name]})):f[g]=d.name}return!1}}function si(e,t){return J(e)||W(e)||le(e)?e.getFields()[t]!=null:!1}function oi(e){const t=Object.create(null);return{OperationDefinition:()=>!1,FragmentDefinition(i){const r=i.name.value;return t[r]?e.reportError(new N(`There can be only one fragment named "${r}".`,{nodes:[t[r],i.name]})):t[r]=i.name,!1}}}function qt(e){const t=[];let i=Object.create(null);return{ObjectValue:{enter(){t.push(i),i=Object.create(null)},leave(){const r=t.pop();r||z(!1),i=r}},ObjectField(r){const n=r.name.value;i[n]?e.reportError(new N(`There can be only one input field named "${n}".`,{nodes:[i[n],r.name]})):i[n]=r.name}}}function ci(e){const t=Object.create(null);return{OperationDefinition(i){const r=i.name;return r&&(t[r.value]?e.reportError(new N(`There can be only one operation named "${r.value}".`,{nodes:[t[r.value],r]})):t[r.value]=r),!1},FragmentDefinition:()=>!1}}function ui(e){const t=e.getSchema(),i=Object.create(null),r=t?{query:t.getQueryType(),mutation:t.getMutationType(),subscription:t.getSubscriptionType()}:{};return{SchemaDefinition:n,SchemaExtension:n};function n(a){var s;const o=(s=a.operationTypes)!==null&&s!==void 0?s:[];for(const c of o){const f=c.operation,d=i[f];r[f]?e.reportError(new N(`Type for ${f} already defined in the schema. It cannot be redefined.`,{nodes:c})):d?e.reportError(new N(`There can be only one ${f} type in schema.`,{nodes:[d,c]})):i[f]=c}return!1}}function fi(e){const t=Object.create(null),i=e.getSchema();return{ScalarTypeDefinition:r,ObjectTypeDefinition:r,InterfaceTypeDefinition:r,UnionTypeDefinition:r,EnumTypeDefinition:r,InputObjectTypeDefinition:r};function r(n){const a=n.name.value;if(i!=null&&i.getType(a)){e.reportError(new N(`Type "${a}" already exists in the schema. It cannot also be defined in this type definition.`,{nodes:n.name}));return}return t[a]?e.reportError(new N(`There can be only one type named "${a}".`,{nodes:[t[a],n.name]})):t[a]=n.name,!1}}function li(e){return{OperationDefinition(t){var i;const r=(i=t.variableDefinitions)!==null&&i!==void 0?i:[],n=sn(r,a=>a.variable.name.value);for(const[a,s]of n)s.length>1&&e.reportError(new N(`There can be only one variable named "$${a}".`,{nodes:s.map(o=>o.variable.name)}))}}}function di(e){return{ListValue(t){const i=or(e.getParentInputType());if(!Q(i))return H(e,t),!1},ObjectValue(t){const i=ie(e.getInputType());if(!le(i))return H(e,t),!1;const r=de(t.fields,n=>n.name.value);for(const n of Object.values(i.getFields()))if(!r[n.name]&&cr(n)){const s=A(n.type);e.reportError(new N(`Field "${i.name}.${n.name}" of required type "${s}" was not provided.`,{nodes:t}))}},ObjectField(t){const i=ie(e.getParentInputType());if(!e.getInputType()&&le(i)){const n=se(t.name.value,Object.keys(i.getFields()));e.reportError(new N(`Field "${t.name.value}" is not defined by type "${i.name}".`+Z(n),{nodes:t}))}},NullValue(t){const i=e.getInputType();P(i)&&e.reportError(new N(`Expected value of type "${A(i)}", found ${Y(t)}.`,{nodes:t}))},EnumValue:t=>H(e,t),IntValue:t=>H(e,t),FloatValue:t=>H(e,t),StringValue:t=>H(e,t),BooleanValue:t=>H(e,t)}}function H(e,t){const i=e.getInputType();if(!i)return;const r=ie(i);if(!De(r)){const n=A(i);e.reportError(new N(`Expected value of type "${n}", found ${Y(t)}.`,{nodes:t}));return}try{if(r.parseLiteral(t,void 0)===void 0){const a=A(i);e.reportError(new N(`Expected value of type "${a}", found ${Y(t)}.`,{nodes:t}))}}catch(n){const a=A(i);n instanceof N?e.reportError(n):e.reportError(new N(`Expected value of type "${a}", found ${Y(t)}; `+n.message,{nodes:t,originalError:n}))}}function pi(e){return{VariableDefinition(t){const i=q(e.getSchema(),t.type);if(i!==void 0&&!ur(i)){const r=t.variable.name.value,n=Y(t.type);e.reportError(new N(`Variable "$${r}" cannot be non-input type "${n}".`,{nodes:t.type}))}}}}function gi(e){let t=Object.create(null);return{OperationDefinition:{enter(){t=Object.create(null)},leave(i){const r=e.getRecursiveVariableUsages(i);for(const{node:n,type:a,defaultValue:s}of r){const o=n.name.value,c=t[o];if(c&&a){const f=e.getSchema(),d=q(f,c.type);if(d&&!vi(f,d,c.defaultValue,a,s)){const g=A(d),h=A(a);e.reportError(new N(`Variable "$${o}" of type "${g}" used in position expecting type "${h}".`,{nodes:[c,n]}))}}}}},VariableDefinition(i){t[i.variable.name.value]=i}}}function vi(e,t,i,r,n){if(P(r)&&!P(t)){if(!(i!=null&&i.kind!==p.NULL)&&!(n!==void 0))return!1;const o=r.ofType;return ue(e,t,o)}return ue(e,t,r)}Object.freeze([Tr,ci,Ar,ni,jt,Ir,pi,Hr,Nr,oi,Or,kr,Yr,Lr,li,Rr,Cr,Vt,Yt,_r,xt,di,Wr,gi,jr,qt]);const mi=Object.freeze([Fr,ui,fi,ii,ai,ti,ri,jt,Vt,Yt,Br,Ct,xt,qt,$t]);class hi{constructor(t,i){this._ast=t,this._fragments=void 0,this._fragmentSpreads=new Map,this._recursivelyReferencedFragments=new Map,this._onError=i}get[Symbol.toStringTag](){return"ASTValidationContext"}reportError(t){this._onError(t)}getDocument(){return this._ast}getFragment(t){let i;if(this._fragments)i=this._fragments;else{i=Object.create(null);for(const r of this.getDocument().definitions)r.kind===p.FRAGMENT_DEFINITION&&(i[r.name.value]=r);this._fragments=i}return i[t]}getFragmentSpreads(t){let i=this._fragmentSpreads.get(t);if(!i){i=[];const r=[t];let n;for(;n=r.pop();)for(const a of n.selections)a.kind===p.FRAGMENT_SPREAD?i.push(a):a.selectionSet&&r.push(a.selectionSet);this._fragmentSpreads.set(t,i)}return i}getRecursivelyReferencedFragments(t){let i=this._recursivelyReferencedFragments.get(t);if(!i){i=[];const r=Object.create(null),n=[t.selectionSet];let a;for(;a=n.pop();)for(const s of this.getFragmentSpreads(a)){const o=s.name.value;if(r[o]!==!0){r[o]=!0;const c=this.getFragment(o);c&&(i.push(c),n.push(c.selectionSet))}}this._recursivelyReferencedFragments.set(t,i)}return i}}class Ei extends hi{constructor(t,i,r){super(t,r),this._schema=i}get[Symbol.toStringTag](){return"SDLValidationContext"}getSchema(){return this._schema}}function Ti(e,t,i=mi){const r=[],n=new Ei(e,t,s=>{r.push(s)}),a=i.map(s=>s(n));return fr(e,lr(a)),r}function Ni(e){const t=Ti(e);if(t.length!==0)throw new Error(t.map(i=>i.message).join(`

`))}function yi(e,t,i){var r,n,a,s;const o=[],c=Object.create(null),f=[];let d;const g=[];for(const l of t.definitions)if(l.kind===p.SCHEMA_DEFINITION)d=l;else if(l.kind===p.SCHEMA_EXTENSION)g.push(l);else if(Me(l))o.push(l);else if(kt(l)){const E=l.name.value,v=c[E];c[E]=v?v.concat([l]):[l]}else l.kind===p.DIRECTIVE_DEFINITION&&f.push(l);if(Object.keys(c).length===0&&o.length===0&&f.length===0&&g.length===0&&d==null)return e;const h=Object.create(null);for(const l of e.types)h[l.name]=K(l);for(const l of o){var m;const E=l.name.value;h[E]=(m=On[E])!==null&&m!==void 0?m:Zt(l)}const w={query:e.query&&U(e.query),mutation:e.mutation&&U(e.mutation),subscription:e.subscription&&U(e.subscription),...d&&fn([d]),...fn(g)};return{description:(r=d)===null||r===void 0||(n=r.description)===null||n===void 0?void 0:n.value,...w,types:Object.values(h),directives:[...e.directives.map(Ee),...f.map(zt)],extensions:Object.create(null),astNode:(a=d)!==null&&a!==void 0?a:e.astNode,extensionASTNodes:e.extensionASTNodes.concat(g),assumeValid:(s=i==null?void 0:i.assumeValid)!==null&&s!==void 0?s:!1};function C(l){return Q(l)?new Be(C(l.ofType)):P(l)?new qe(C(l.ofType)):U(l)}function U(l){return h[l.name]}function Ee(l){const E=l.toConfig();return new vn({...E,args:ce(E.args,un)})}function K(l){if(dr(l)||pr(l))return l;if(Ft(l))return Qt(l);if(J(l))return Wt(l);if(W(l))return Jt(l);if(Lt(l))return Ht(l);if(tn(l))return Gt(l);if(le(l))return Te(l);z(!1,"Unexpected type: "+A(l))}function Te(l){var E;const v=l.toConfig(),T=(E=c[v.name])!==null&&E!==void 0?E:[];return new mn({...v,fields:()=>({...ce(v.fields,O=>({...O,type:C(O.type)})),...dn(T)}),extensionASTNodes:v.extensionASTNodes.concat(T)})}function Gt(l){var E;const v=l.toConfig(),T=(E=c[l.name])!==null&&E!==void 0?E:[];return new hn({...v,values:{...v.values,...pn(T)},extensionASTNodes:v.extensionASTNodes.concat(T)})}function Qt(l){var E;const v=l.toConfig(),T=(E=c[v.name])!==null&&E!==void 0?E:[];let O=v.specifiedByURL;for(const S of T){var R;O=(R=Sn(S))!==null&&R!==void 0?R:O}return new En({...v,specifiedByURL:O,extensionASTNodes:v.extensionASTNodes.concat(T)})}function Wt(l){var E;const v=l.toConfig(),T=(E=c[v.name])!==null&&E!==void 0?E:[];return new Tn({...v,interfaces:()=>[...l.getInterfaces().map(U),...be(T)],fields:()=>({...ce(v.fields,cn),...ye(T)}),extensionASTNodes:v.extensionASTNodes.concat(T)})}function Jt(l){var E;const v=l.toConfig(),T=(E=c[v.name])!==null&&E!==void 0?E:[];return new Nn({...v,interfaces:()=>[...l.getInterfaces().map(U),...be(T)],fields:()=>({...ce(v.fields,cn),...ye(T)}),extensionASTNodes:v.extensionASTNodes.concat(T)})}function Ht(l){var E;const v=l.toConfig(),T=(E=c[v.name])!==null&&E!==void 0?E:[];return new yn({...v,types:()=>[...l.getTypes().map(U),...gn(T)],extensionASTNodes:v.extensionASTNodes.concat(T)})}function cn(l){return{...l,type:C(l.type),args:l.args&&ce(l.args,un)}}function un(l){return{...l,type:C(l.type)}}function fn(l){const E={};for(const T of l){var v;const O=(v=T.operationTypes)!==null&&v!==void 0?v:[];for(const R of O)E[R.operation]=Ne(R.type)}return E}function Ne(l){var E;const v=l.name.value,T=(E=On[v])!==null&&E!==void 0?E:h[v];if(T===void 0)throw new Error(`Unknown type: "${v}".`);return T}function oe(l){return l.kind===p.LIST_TYPE?new Be(oe(l.type)):l.kind===p.NON_NULL_TYPE?new qe(oe(l.type)):Ne(l)}function zt(l){var E;return new vn({name:l.name.value,description:(E=l.description)===null||E===void 0?void 0:E.value,locations:l.locations.map(({value:v})=>v),isRepeatable:l.repeatable,args:ln(l.arguments),astNode:l})}function ye(l){const E=Object.create(null);for(const O of l){var v;const R=(v=O.fields)!==null&&v!==void 0?v:[];for(const S of R){var T;E[S.name.value]={type:oe(S.type),description:(T=S.description)===null||T===void 0?void 0:T.value,args:ln(S.arguments),deprecationReason:Ie(S),astNode:S}}}return E}function ln(l){const E=l!=null?l:[],v=Object.create(null);for(const O of E){var T;const R=oe(O.type);v[O.name.value]={type:R,description:(T=O.description)===null||T===void 0?void 0:T.value,defaultValue:Xe(O.defaultValue,R),deprecationReason:Ie(O),astNode:O}}return v}function dn(l){const E=Object.create(null);for(const O of l){var v;const R=(v=O.fields)!==null&&v!==void 0?v:[];for(const S of R){var T;const ee=oe(S.type);E[S.name.value]={type:ee,description:(T=S.description)===null||T===void 0?void 0:T.value,defaultValue:Xe(S.defaultValue,ee),deprecationReason:Ie(S),astNode:S}}}return E}function pn(l){const E=Object.create(null);for(const O of l){var v;const R=(v=O.values)!==null&&v!==void 0?v:[];for(const S of R){var T;E[S.name.value]={description:(T=S.description)===null||T===void 0?void 0:T.value,deprecationReason:Ie(S),astNode:S}}}return E}function be(l){return l.flatMap(E=>{var v,T;return(v=(T=E.interfaces)===null||T===void 0?void 0:T.map(Ne))!==null&&v!==void 0?v:[]})}function gn(l){return l.flatMap(E=>{var v,T;return(v=(T=E.types)===null||T===void 0?void 0:T.map(Ne))!==null&&v!==void 0?v:[]})}function Zt(l){var E;const v=l.name.value,T=(E=c[v])!==null&&E!==void 0?E:[];switch(l.kind){case p.OBJECT_TYPE_DEFINITION:{var O;const $=[l,...T];return new Tn({name:v,description:(O=l.description)===null||O===void 0?void 0:O.value,interfaces:()=>be($),fields:()=>ye($),astNode:l,extensionASTNodes:T})}case p.INTERFACE_TYPE_DEFINITION:{var R;const $=[l,...T];return new Nn({name:v,description:(R=l.description)===null||R===void 0?void 0:R.value,interfaces:()=>be($),fields:()=>ye($),astNode:l,extensionASTNodes:T})}case p.ENUM_TYPE_DEFINITION:{var S;const $=[l,...T];return new hn({name:v,description:(S=l.description)===null||S===void 0?void 0:S.value,values:pn($),astNode:l,extensionASTNodes:T})}case p.UNION_TYPE_DEFINITION:{var ee;const $=[l,...T];return new yn({name:v,description:(ee=l.description)===null||ee===void 0?void 0:ee.value,types:()=>gn($),astNode:l,extensionASTNodes:T})}case p.SCALAR_TYPE_DEFINITION:{var Ue;return new En({name:v,description:(Ue=l.description)===null||Ue===void 0?void 0:Ue.value,specifiedByURL:Sn(l),astNode:l,extensionASTNodes:T})}case p.INPUT_OBJECT_TYPE_DEFINITION:{var Pe;const $=[l,...T];return new mn({name:v,description:(Pe=l.description)===null||Pe===void 0?void 0:Pe.value,fields:()=>dn($),astNode:l,extensionASTNodes:T})}}}}const On=de([...St,...At],e=>e.name);function Ie(e){const t=Ae(gr,e);return t==null?void 0:t.reason}function Sn(e){const t=Ae(vr,e);return t==null?void 0:t.url}function bi(e,t){e!=null&&e.kind===p.DOCUMENT||mr(!1,"Must provide valid Document AST."),(t==null?void 0:t.assumeValid)!==!0&&(t==null?void 0:t.assumeValidSDL)!==!0&&Ni(e);const r=yi({description:void 0,types:[],directives:[],extensions:Object.create(null),extensionASTNodes:[],assumeValid:!1},e,t);if(r.astNode==null)for(const a of r.types)switch(a.name){case"Query":r.query=a;break;case"Mutation":r.mutation=a;break;case"Subscription":r.subscription=a;break}const n=[...r.directives,...he.filter(a=>r.directives.every(s=>s.name!==a.name))];return new hr({...r,directives:n})}var An;(function(e){function t(i){return typeof i=="string"}e.is=t})(An||(An={}));var Je;(function(e){function t(i){return typeof i=="string"}e.is=t})(Je||(Je={}));var Fn;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(i){return typeof i=="number"&&e.MIN_VALUE<=i&&i<=e.MAX_VALUE}e.is=t})(Fn||(Fn={}));var Fe;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(i){return typeof i=="number"&&e.MIN_VALUE<=i&&i<=e.MAX_VALUE}e.is=t})(Fe||(Fe={}));var x;(function(e){function t(r,n){return r===Number.MAX_VALUE&&(r=Fe.MAX_VALUE),n===Number.MAX_VALUE&&(n=Fe.MAX_VALUE),{line:r,character:n}}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&u.uinteger(n.line)&&u.uinteger(n.character)}e.is=i})(x||(x={}));var L;(function(e){function t(r,n,a,s){if(u.uinteger(r)&&u.uinteger(n)&&u.uinteger(a)&&u.uinteger(s))return{start:x.create(r,n),end:x.create(a,s)};if(x.is(r)&&x.is(n))return{start:r,end:n};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(n,", ").concat(a,", ").concat(s,"]"))}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&x.is(n.start)&&x.is(n.end)}e.is=i})(L||(L={}));var Le;(function(e){function t(r,n){return{uri:r,range:n}}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&L.is(n.range)&&(u.string(n.uri)||u.undefined(n.uri))}e.is=i})(Le||(Le={}));var Ln;(function(e){function t(r,n,a,s){return{targetUri:r,targetRange:n,targetSelectionRange:a,originSelectionRange:s}}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&L.is(n.targetRange)&&u.string(n.targetUri)&&L.is(n.targetSelectionRange)&&(L.is(n.originSelectionRange)||u.undefined(n.originSelectionRange))}e.is=i})(Ln||(Ln={}));var He;(function(e){function t(r,n,a,s){return{red:r,green:n,blue:a,alpha:s}}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&u.numberRange(n.red,0,1)&&u.numberRange(n.green,0,1)&&u.numberRange(n.blue,0,1)&&u.numberRange(n.alpha,0,1)}e.is=i})(He||(He={}));var Rn;(function(e){function t(r,n){return{range:r,color:n}}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&L.is(n.range)&&He.is(n.color)}e.is=i})(Rn||(Rn={}));var kn;(function(e){function t(r,n,a){return{label:r,textEdit:n,additionalTextEdits:a}}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&u.string(n.label)&&(u.undefined(n.textEdit)||X.is(n))&&(u.undefined(n.additionalTextEdits)||u.typedArray(n.additionalTextEdits,X.is))}e.is=i})(kn||(kn={}));var Cn;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(Cn||(Cn={}));var Vn;(function(e){function t(r,n,a,s,o,c){var f={startLine:r,endLine:n};return u.defined(a)&&(f.startCharacter=a),u.defined(s)&&(f.endCharacter=s),u.defined(o)&&(f.kind=o),u.defined(c)&&(f.collapsedText=c),f}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&u.uinteger(n.startLine)&&u.uinteger(n.startLine)&&(u.undefined(n.startCharacter)||u.uinteger(n.startCharacter))&&(u.undefined(n.endCharacter)||u.uinteger(n.endCharacter))&&(u.undefined(n.kind)||u.string(n.kind))}e.is=i})(Vn||(Vn={}));var ze;(function(e){function t(r,n){return{location:r,message:n}}e.create=t;function i(r){var n=r;return u.defined(n)&&Le.is(n.location)&&u.string(n.message)}e.is=i})(ze||(ze={}));var jn;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(jn||(jn={}));var Mn;(function(e){e.Unnecessary=1,e.Deprecated=2})(Mn||(Mn={}));var Un;(function(e){function t(i){var r=i;return u.objectLiteral(r)&&u.string(r.href)}e.is=t})(Un||(Un={}));var Re;(function(e){function t(r,n,a,s,o,c){var f={range:r,message:n};return u.defined(a)&&(f.severity=a),u.defined(s)&&(f.code=s),u.defined(o)&&(f.source=o),u.defined(c)&&(f.relatedInformation=c),f}e.create=t;function i(r){var n,a=r;return u.defined(a)&&L.is(a.range)&&u.string(a.message)&&(u.number(a.severity)||u.undefined(a.severity))&&(u.integer(a.code)||u.string(a.code)||u.undefined(a.code))&&(u.undefined(a.codeDescription)||u.string((n=a.codeDescription)===null||n===void 0?void 0:n.href))&&(u.string(a.source)||u.undefined(a.source))&&(u.undefined(a.relatedInformation)||u.typedArray(a.relatedInformation,ze.is))}e.is=i})(Re||(Re={}));var ae;(function(e){function t(r,n){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var o={title:r,command:n};return u.defined(a)&&a.length>0&&(o.arguments=a),o}e.create=t;function i(r){var n=r;return u.defined(n)&&u.string(n.title)&&u.string(n.command)}e.is=i})(ae||(ae={}));var X;(function(e){function t(a,s){return{range:a,newText:s}}e.replace=t;function i(a,s){return{range:{start:a,end:a},newText:s}}e.insert=i;function r(a){return{range:a,newText:""}}e.del=r;function n(a){var s=a;return u.objectLiteral(s)&&u.string(s.newText)&&L.is(s.range)}e.is=n})(X||(X={}));var re;(function(e){function t(r,n,a){var s={label:r};return n!==void 0&&(s.needsConfirmation=n),a!==void 0&&(s.description=a),s}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&u.string(n.label)&&(u.boolean(n.needsConfirmation)||n.needsConfirmation===void 0)&&(u.string(n.description)||n.description===void 0)}e.is=i})(re||(re={}));var j;(function(e){function t(i){var r=i;return u.string(r)}e.is=t})(j||(j={}));var G;(function(e){function t(a,s,o){return{range:a,newText:s,annotationId:o}}e.replace=t;function i(a,s,o){return{range:{start:a,end:a},newText:s,annotationId:o}}e.insert=i;function r(a,s){return{range:a,newText:"",annotationId:s}}e.del=r;function n(a){var s=a;return X.is(s)&&(re.is(s.annotationId)||j.is(s.annotationId))}e.is=n})(G||(G={}));var ke;(function(e){function t(r,n){return{textDocument:r,edits:n}}e.create=t;function i(r){var n=r;return u.defined(n)&&Ce.is(n.textDocument)&&Array.isArray(n.edits)}e.is=i})(ke||(ke={}));var pe;(function(e){function t(r,n,a){var s={kind:"create",uri:r};return n!==void 0&&(n.overwrite!==void 0||n.ignoreIfExists!==void 0)&&(s.options=n),a!==void 0&&(s.annotationId=a),s}e.create=t;function i(r){var n=r;return n&&n.kind==="create"&&u.string(n.uri)&&(n.options===void 0||(n.options.overwrite===void 0||u.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||u.boolean(n.options.ignoreIfExists)))&&(n.annotationId===void 0||j.is(n.annotationId))}e.is=i})(pe||(pe={}));var ge;(function(e){function t(r,n,a,s){var o={kind:"rename",oldUri:r,newUri:n};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(o.options=a),s!==void 0&&(o.annotationId=s),o}e.create=t;function i(r){var n=r;return n&&n.kind==="rename"&&u.string(n.oldUri)&&u.string(n.newUri)&&(n.options===void 0||(n.options.overwrite===void 0||u.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||u.boolean(n.options.ignoreIfExists)))&&(n.annotationId===void 0||j.is(n.annotationId))}e.is=i})(ge||(ge={}));var ve;(function(e){function t(r,n,a){var s={kind:"delete",uri:r};return n!==void 0&&(n.recursive!==void 0||n.ignoreIfNotExists!==void 0)&&(s.options=n),a!==void 0&&(s.annotationId=a),s}e.create=t;function i(r){var n=r;return n&&n.kind==="delete"&&u.string(n.uri)&&(n.options===void 0||(n.options.recursive===void 0||u.boolean(n.options.recursive))&&(n.options.ignoreIfNotExists===void 0||u.boolean(n.options.ignoreIfNotExists)))&&(n.annotationId===void 0||j.is(n.annotationId))}e.is=i})(ve||(ve={}));var Ze;(function(e){function t(i){var r=i;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(n){return u.string(n.kind)?pe.is(n)||ge.is(n)||ve.is(n):ke.is(n)}))}e.is=t})(Ze||(Ze={}));var _e=function(){function e(t,i){this.edits=t,this.changeAnnotations=i}return e.prototype.insert=function(t,i,r){var n,a;if(r===void 0?n=X.insert(t,i):j.is(r)?(a=r,n=G.insert(t,i,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),n=G.insert(t,i,a)),this.edits.push(n),a!==void 0)return a},e.prototype.replace=function(t,i,r){var n,a;if(r===void 0?n=X.replace(t,i):j.is(r)?(a=r,n=G.replace(t,i,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),n=G.replace(t,i,a)),this.edits.push(n),a!==void 0)return a},e.prototype.delete=function(t,i){var r,n;if(i===void 0?r=X.del(t):j.is(i)?(n=i,r=G.del(t,i)):(this.assertChangeAnnotations(this.changeAnnotations),n=this.changeAnnotations.manage(i),r=G.del(t,n)),this.edits.push(r),n!==void 0)return n},e.prototype.add=function(t){this.edits.push(t)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(t){if(t===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),Pn=function(){function e(t){this._annotations=t===void 0?Object.create(null):t,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(t,i){var r;if(j.is(t)?r=t:(r=this.nextId(),i=t),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(i===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=i,this._size++,r},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}();(function(){function e(t){var i=this;this._textEditChanges=Object.create(null),t!==void 0?(this._workspaceEdit=t,t.documentChanges?(this._changeAnnotations=new Pn(t.changeAnnotations),t.changeAnnotations=this._changeAnnotations.all(),t.documentChanges.forEach(function(r){if(ke.is(r)){var n=new _e(r.edits,i._changeAnnotations);i._textEditChanges[r.textDocument.uri]=n}})):t.changes&&Object.keys(t.changes).forEach(function(r){var n=new _e(t.changes[r]);i._textEditChanges[r]=n})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(t){if(Ce.is(t)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i={uri:t.uri,version:t.version},r=this._textEditChanges[i.uri];if(!r){var n=[],a={textDocument:i,edits:n};this._workspaceEdit.documentChanges.push(a),r=new _e(n,this._changeAnnotations),this._textEditChanges[i.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[t];if(!r){var n=[];this._workspaceEdit.changes[t]=n,r=new _e(n),this._textEditChanges[t]=r}return r}},e.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Pn,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(t,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n;re.is(i)||j.is(i)?n=i:r=i;var a,s;if(n===void 0?a=pe.create(t,r):(s=j.is(n)?n:this._changeAnnotations.manage(n),a=pe.create(t,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},e.prototype.renameFile=function(t,i,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;re.is(r)||j.is(r)?a=r:n=r;var s,o;if(a===void 0?s=ge.create(t,i,n):(o=j.is(a)?a:this._changeAnnotations.manage(a),s=ge.create(t,i,n,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},e.prototype.deleteFile=function(t,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n;re.is(i)||j.is(i)?n=i:r=i;var a,s;if(n===void 0?a=ve.create(t,r):(s=j.is(n)?n:this._changeAnnotations.manage(n),a=ve.create(t,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},e})();var $n;(function(e){function t(r){return{uri:r}}e.create=t;function i(r){var n=r;return u.defined(n)&&u.string(n.uri)}e.is=i})($n||($n={}));var xn;(function(e){function t(r,n){return{uri:r,version:n}}e.create=t;function i(r){var n=r;return u.defined(n)&&u.string(n.uri)&&u.integer(n.version)}e.is=i})(xn||(xn={}));var Ce;(function(e){function t(r,n){return{uri:r,version:n}}e.create=t;function i(r){var n=r;return u.defined(n)&&u.string(n.uri)&&(n.version===null||u.integer(n.version))}e.is=i})(Ce||(Ce={}));var Yn;(function(e){function t(r,n,a,s){return{uri:r,languageId:n,version:a,text:s}}e.create=t;function i(r){var n=r;return u.defined(n)&&u.string(n.uri)&&u.string(n.languageId)&&u.integer(n.version)&&u.string(n.text)}e.is=i})(Yn||(Yn={}));var Ke;(function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(i){var r=i;return r===e.PlainText||r===e.Markdown}e.is=t})(Ke||(Ke={}));var me;(function(e){function t(i){var r=i;return u.objectLiteral(i)&&Ke.is(r.kind)&&u.string(r.value)}e.is=t})(me||(me={}));var qn;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(qn||(qn={}));var Bn;(function(e){e.PlainText=1,e.Snippet=2})(Bn||(Bn={}));var Xn;(function(e){e.Deprecated=1})(Xn||(Xn={}));var Gn;(function(e){function t(r,n,a){return{newText:r,insert:n,replace:a}}e.create=t;function i(r){var n=r;return n&&u.string(n.newText)&&L.is(n.insert)&&L.is(n.replace)}e.is=i})(Gn||(Gn={}));var Qn;(function(e){e.asIs=1,e.adjustIndentation=2})(Qn||(Qn={}));var Wn;(function(e){function t(i){var r=i;return r&&(u.string(r.detail)||r.detail===void 0)&&(u.string(r.description)||r.description===void 0)}e.is=t})(Wn||(Wn={}));var Jn;(function(e){function t(i){return{label:i}}e.create=t})(Jn||(Jn={}));var Hn;(function(e){function t(i,r){return{items:i||[],isIncomplete:!!r}}e.create=t})(Hn||(Hn={}));var Ve;(function(e){function t(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function i(r){var n=r;return u.string(n)||u.objectLiteral(n)&&u.string(n.language)&&u.string(n.value)}e.is=i})(Ve||(Ve={}));var zn;(function(e){function t(i){var r=i;return!!r&&u.objectLiteral(r)&&(me.is(r.contents)||Ve.is(r.contents)||u.typedArray(r.contents,Ve.is))&&(i.range===void 0||L.is(i.range))}e.is=t})(zn||(zn={}));var Zn;(function(e){function t(i,r){return r?{label:i,documentation:r}:{label:i}}e.create=t})(Zn||(Zn={}));var Kn;(function(e){function t(i,r){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];var s={label:i};return u.defined(r)&&(s.documentation=r),u.defined(n)?s.parameters=n:s.parameters=[],s}e.create=t})(Kn||(Kn={}));var et;(function(e){e.Text=1,e.Read=2,e.Write=3})(et||(et={}));var nt;(function(e){function t(i,r){var n={range:i};return u.number(r)&&(n.kind=r),n}e.create=t})(nt||(nt={}));var tt;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(tt||(tt={}));var rt;(function(e){e.Deprecated=1})(rt||(rt={}));var it;(function(e){function t(i,r,n,a,s){var o={name:i,kind:r,location:{uri:a,range:n}};return s&&(o.containerName=s),o}e.create=t})(it||(it={}));var at;(function(e){function t(i,r,n,a){return a!==void 0?{name:i,kind:r,location:{uri:n,range:a}}:{name:i,kind:r,location:{uri:n}}}e.create=t})(at||(at={}));var st;(function(e){function t(r,n,a,s,o,c){var f={name:r,detail:n,kind:a,range:s,selectionRange:o};return c!==void 0&&(f.children=c),f}e.create=t;function i(r){var n=r;return n&&u.string(n.name)&&u.number(n.kind)&&L.is(n.range)&&L.is(n.selectionRange)&&(n.detail===void 0||u.string(n.detail))&&(n.deprecated===void 0||u.boolean(n.deprecated))&&(n.children===void 0||Array.isArray(n.children))&&(n.tags===void 0||Array.isArray(n.tags))}e.is=i})(st||(st={}));var ot;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(ot||(ot={}));var je;(function(e){e.Invoked=1,e.Automatic=2})(je||(je={}));var ct;(function(e){function t(r,n,a){var s={diagnostics:r};return n!=null&&(s.only=n),a!=null&&(s.triggerKind=a),s}e.create=t;function i(r){var n=r;return u.defined(n)&&u.typedArray(n.diagnostics,Re.is)&&(n.only===void 0||u.typedArray(n.only,u.string))&&(n.triggerKind===void 0||n.triggerKind===je.Invoked||n.triggerKind===je.Automatic)}e.is=i})(ct||(ct={}));var ut;(function(e){function t(r,n,a){var s={title:r},o=!0;return typeof n=="string"?(o=!1,s.kind=n):ae.is(n)?s.command=n:s.edit=n,o&&a!==void 0&&(s.kind=a),s}e.create=t;function i(r){var n=r;return n&&u.string(n.title)&&(n.diagnostics===void 0||u.typedArray(n.diagnostics,Re.is))&&(n.kind===void 0||u.string(n.kind))&&(n.edit!==void 0||n.command!==void 0)&&(n.command===void 0||ae.is(n.command))&&(n.isPreferred===void 0||u.boolean(n.isPreferred))&&(n.edit===void 0||Ze.is(n.edit))}e.is=i})(ut||(ut={}));var ft;(function(e){function t(r,n){var a={range:r};return u.defined(n)&&(a.data=n),a}e.create=t;function i(r){var n=r;return u.defined(n)&&L.is(n.range)&&(u.undefined(n.command)||ae.is(n.command))}e.is=i})(ft||(ft={}));var lt;(function(e){function t(r,n){return{tabSize:r,insertSpaces:n}}e.create=t;function i(r){var n=r;return u.defined(n)&&u.uinteger(n.tabSize)&&u.boolean(n.insertSpaces)}e.is=i})(lt||(lt={}));var dt;(function(e){function t(r,n,a){return{range:r,target:n,data:a}}e.create=t;function i(r){var n=r;return u.defined(n)&&L.is(n.range)&&(u.undefined(n.target)||u.string(n.target))}e.is=i})(dt||(dt={}));var pt;(function(e){function t(r,n){return{range:r,parent:n}}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&L.is(n.range)&&(n.parent===void 0||e.is(n.parent))}e.is=i})(pt||(pt={}));var gt;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"})(gt||(gt={}));var vt;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(vt||(vt={}));var mt;(function(e){function t(i){var r=i;return u.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}e.is=t})(mt||(mt={}));var ht;(function(e){function t(r,n){return{range:r,text:n}}e.create=t;function i(r){var n=r;return n!=null&&L.is(n.range)&&u.string(n.text)}e.is=i})(ht||(ht={}));var Et;(function(e){function t(r,n,a){return{range:r,variableName:n,caseSensitiveLookup:a}}e.create=t;function i(r){var n=r;return n!=null&&L.is(n.range)&&u.boolean(n.caseSensitiveLookup)&&(u.string(n.variableName)||n.variableName===void 0)}e.is=i})(Et||(Et={}));var Tt;(function(e){function t(r,n){return{range:r,expression:n}}e.create=t;function i(r){var n=r;return n!=null&&L.is(n.range)&&(u.string(n.expression)||n.expression===void 0)}e.is=i})(Tt||(Tt={}));var Nt;(function(e){function t(r,n){return{frameId:r,stoppedLocation:n}}e.create=t;function i(r){var n=r;return u.defined(n)&&L.is(r.stoppedLocation)}e.is=i})(Nt||(Nt={}));var en;(function(e){e.Type=1,e.Parameter=2;function t(i){return i===1||i===2}e.is=t})(en||(en={}));var nn;(function(e){function t(r){return{value:r}}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&(n.tooltip===void 0||u.string(n.tooltip)||me.is(n.tooltip))&&(n.location===void 0||Le.is(n.location))&&(n.command===void 0||ae.is(n.command))}e.is=i})(nn||(nn={}));var yt;(function(e){function t(r,n,a){var s={position:r,label:n};return a!==void 0&&(s.kind=a),s}e.create=t;function i(r){var n=r;return u.objectLiteral(n)&&x.is(n.position)&&(u.string(n.label)||u.typedArray(n.label,nn.is))&&(n.kind===void 0||en.is(n.kind))&&n.textEdits===void 0||u.typedArray(n.textEdits,X.is)&&(n.tooltip===void 0||u.string(n.tooltip)||me.is(n.tooltip))&&(n.paddingLeft===void 0||u.boolean(n.paddingLeft))&&(n.paddingRight===void 0||u.boolean(n.paddingRight))}e.is=i})(yt||(yt={}));var bt;(function(e){function t(i){var r=i;return u.objectLiteral(r)&&Je.is(r.uri)&&u.string(r.name)}e.is=t})(bt||(bt={}));var It;(function(e){function t(a,s,o,c){return new Ii(a,s,o,c)}e.create=t;function i(a){var s=a;return!!(u.defined(s)&&u.string(s.uri)&&(u.undefined(s.languageId)||u.string(s.languageId))&&u.uinteger(s.lineCount)&&u.func(s.getText)&&u.func(s.positionAt)&&u.func(s.offsetAt))}e.is=i;function r(a,s){for(var o=a.getText(),c=n(s,function(w,C){var U=w.range.start.line-C.range.start.line;return U===0?w.range.start.character-C.range.start.character:U}),f=o.length,d=c.length-1;d>=0;d--){var g=c[d],h=a.offsetAt(g.range.start),m=a.offsetAt(g.range.end);if(m<=f)o=o.substring(0,h)+g.newText+o.substring(m,o.length);else throw new Error("Overlapping edit");f=h}return o}e.applyEdits=r;function n(a,s){if(a.length<=1)return a;var o=a.length/2|0,c=a.slice(0,o),f=a.slice(o);n(c,s),n(f,s);for(var d=0,g=0,h=0;d<c.length&&g<f.length;){var m=s(c[d],f[g]);m<=0?a[h++]=c[d++]:a[h++]=f[g++]}for(;d<c.length;)a[h++]=c[d++];for(;g<f.length;)a[h++]=f[g++];return a}})(It||(It={}));var Ii=function(){function e(t,i,r,n){this._uri=t,this._languageId=i,this._version=r,this._content=n,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(t){if(t){var i=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(i,r)}return this._content},e.prototype.update=function(t,i){this._content=t.text,this._version=i,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var t=[],i=this._content,r=!0,n=0;n<i.length;n++){r&&(t.push(n),r=!1);var a=i.charAt(n);r=a==="\r"||a===`
`,a==="\r"&&n+1<i.length&&i.charAt(n+1)===`
`&&n++}r&&i.length>0&&t.push(i.length),this._lineOffsets=t}return this._lineOffsets},e.prototype.positionAt=function(t){t=Math.max(Math.min(t,this._content.length),0);var i=this.getLineOffsets(),r=0,n=i.length;if(n===0)return x.create(0,t);for(;r<n;){var a=Math.floor((r+n)/2);i[a]>t?n=a:r=a+1}var s=r-1;return x.create(s,t-i[s])},e.prototype.offsetAt=function(t){var i=this.getLineOffsets();if(t.line>=i.length)return this._content.length;if(t.line<0)return 0;var r=i[t.line],n=t.line+1<i.length?i[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,n),r)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}(),u;(function(e){var t=Object.prototype.toString;function i(m){return typeof m<"u"}e.defined=i;function r(m){return typeof m>"u"}e.undefined=r;function n(m){return m===!0||m===!1}e.boolean=n;function a(m){return t.call(m)==="[object String]"}e.string=a;function s(m){return t.call(m)==="[object Number]"}e.number=s;function o(m,w,C){return t.call(m)==="[object Number]"&&w<=m&&m<=C}e.numberRange=o;function c(m){return t.call(m)==="[object Number]"&&-2147483648<=m&&m<=2147483647}e.integer=c;function f(m){return t.call(m)==="[object Number]"&&0<=m&&m<=2147483647}e.uinteger=f;function d(m){return t.call(m)==="[object Function]"}e.func=d;function g(m){return m!==null&&typeof m=="object"}e.objectLiteral=g;function h(m,w){return Array.isArray(m)&&m.every(w)}e.typedArray=h})(u||(u={}));function F(e){return{ofRule:e}}function b(e,t){return{ofRule:e,isList:!0,separator:t}}function _i(e,t){const i=e.match;return e.match=r=>{let n=!1;return i&&(n=i(r)),n&&t.every(a=>a.match&&!a.match(r))},e}function Ye(e,t){return{style:t,match:i=>i.kind===e}}function y(e,t){return{style:t||"punctuation",match:i=>i.kind==="Punctuation"&&i.value===e}}b("Definition"),V("query"),F(_("def")),F("VariableDefinitions"),b("Directive"),V("mutation"),F(_("def")),F("VariableDefinitions"),b("Directive"),V("subscription"),F(_("def")),F("VariableDefinitions"),b("Directive"),y("("),b("VariableDefinition"),y(")"),y(":"),F("DefaultValue"),y("$","variable"),_("variable"),y("="),y("{"),b("Selection"),y("}"),_("property"),y(":"),_("qualifier"),F("Arguments"),b("Directive"),F("SelectionSet"),_("property"),F("Arguments"),b("Directive"),F("SelectionSet"),y("("),b("Argument"),y(")"),_("attribute"),y(":"),y("..."),_("def"),b("Directive"),y("..."),F("TypeCondition"),b("Directive"),V("fragment"),F(_i(_("def"),[V("on")])),b("Directive"),V("on"),Ye("Number","number"),Ye("Name","builtin"),Ye("Name","keyword"),_("string-2"),y("["),b("Value"),y("]"),y("{"),b("ObjectField"),y("}"),_("attribute"),y(":"),y("["),y("]"),F(y("!")),F(y("!")),Di("atom"),y("@","meta"),_("meta"),F("Arguments"),V("directive"),y("@","meta"),_("meta"),F("ArgumentsDef"),V("on"),b("DirectiveLocation",y("|")),V("interface"),_("atom"),F("Implements"),b("Directive"),y("{"),b("FieldDef"),y("}"),V("implements"),b("NamedType",y("&")),_("string-2"),V("schema"),b("Directive"),y("{"),b("OperationTypeDef"),y("}"),_("keyword"),y(":"),_("atom"),V("scalar"),_("atom"),b("Directive"),V("type"),_("atom"),F("Implements"),b("Directive"),y("{"),b("FieldDef"),y("}"),_("property"),F("ArgumentsDef"),y(":"),b("Directive"),y("("),b("InputValueDef"),y(")"),_("attribute"),y(":"),F("DefaultValue"),b("Directive"),V("union"),_("atom"),b("Directive"),y("="),b("UnionMember",y("|")),V("enum"),_("atom"),b("Directive"),y("{"),b("EnumValueDef"),y("}"),_("string-2"),b("Directive"),V("input"),_("atom"),b("Directive"),y("{"),b("InputValueDef"),y("}"),V("extend");function V(e){return{style:"keyword",match:t=>t.kind==="Name"&&t.value===e}}function _(e){return{style:e,match:t=>t.kind==="Name",update(t,i){t.name=i.value}}}function Di(e){return{style:e,match:t=>t.kind==="Name",update(t,i){var r;!((r=t.prevState)===null||r===void 0)&&r.prevState&&(t.name=i.value,t.prevState.prevState.type=i.value)}}}const wi={ALIASED_FIELD:"AliasedField",ARGUMENTS:"Arguments",SHORT_QUERY:"ShortQuery",QUERY:"Query",MUTATION:"Mutation",SUBSCRIPTION:"Subscription",TYPE_CONDITION:"TypeCondition",INVALID:"Invalid",COMMENT:"Comment",SCHEMA_DEF:"SchemaDef",SCALAR_DEF:"ScalarDef",OBJECT_TYPE_DEF:"ObjectTypeDef",OBJECT_VALUE:"ObjectValue",LIST_VALUE:"ListValue",INTERFACE_DEF:"InterfaceDef",UNION_DEF:"UnionDef",ENUM_DEF:"EnumDef",ENUM_VALUE:"EnumValue",FIELD_DEF:"FieldDef",INPUT_DEF:"InputDef",INPUT_VALUE_DEF:"InputValueDef",ARGUMENTS_DEF:"ArgumentsDef",EXTEND_DEF:"ExtendDef",DIRECTIVE_DEF:"DirectiveDef",IMPLEMENTS:"Implements",VARIABLE_DEFINITIONS:"VariableDefinitions",TYPE:"Type"};Object.assign(Object.assign({},p),wi);var on={exports:{}};function Bt(e,t){if(e!=null)return e;var i=new Error(t!==void 0?t:"Got unexpected "+e);throw i.framesToPop=1,i}on.exports=Bt;on.exports.default=Bt;Object.defineProperty(on.exports,"__esModule",{value:!0});globalThis&&globalThis.__awaiter;var I;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(I||(I={}));const _t=e=>"getModeId"in e?e.getModeId():e.getLanguageId(),Oi=e=>{const{schema:t,documentAST:i,introspectionJSON:r,introspectionJSONString:n,documentString:a,...s}=e;if(t)return{...s,documentString:bn(t)};if(n)return{...s,introspectionJSONString:n};if(a)return{...s,documentString:a};if(r)return{...s,introspectionJSONString:JSON.stringify(r)};if(i){const o=bi(i,s.buildSchemaOptions);return{...s,documentString:bn(o)}}throw Error("no schema supplied")},Si=2*60*1e3;class Ai{constructor(t){M(this,"_defaults");M(this,"_idleCheckInterval");M(this,"_lastUsedTime");M(this,"_configChangeListener");M(this,"_worker");M(this,"_client");this._defaults=t,this._worker=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>{this._stopWorker()}),this._client=null}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>Si&&this._stopWorker()}async _getClient(){var t;if(this._lastUsedTime=Date.now(),!this._client&&!this._worker)try{this._worker=B.createWebWorker({moduleId:"monaco-graphql/esm/GraphQLWorker.js",label:this._defaults.languageId,createData:{languageId:this._defaults.languageId,formattingOptions:this._defaults.formattingOptions,languageConfig:{schemas:(t=this._defaults.schemas)==null?void 0:t.map(Oi),externalFragmentDefinitions:this._defaults.externalFragmentDefinitions}}}),this._client=await this._worker.getProxy()}catch(i){console.error("error loading worker",i)}return this._client}async getLanguageServiceWorker(...t){const i=await this._getClient();return await this._worker.withSyncedResources(t),i}}class Fi{constructor(t,i){M(this,"defaults");M(this,"_worker");M(this,"_disposables",[]);M(this,"_listener",Object.create(null));this.defaults=t,this._worker=i,this._worker=i;const r=a=>{var d;const s=_t(a);if(s!==this.defaults.languageId)return;const o=a.uri.toString(),c=((d=t.diagnosticSettings)==null?void 0:d.validateVariablesJSON)&&t.diagnosticSettings.validateVariablesJSON[o];let f;this._listener[o]=a.onDidChangeContent(()=>{clearTimeout(f),f=setTimeout(()=>{this._doValidate(a.uri,s,c)},200)}),this._doValidate(a.uri,s,c)},n=a=>{B.setModelMarkers(a,this.defaults.languageId,[]);const s=a.uri.toString(),o=this._listener[s];o&&(o.dispose(),delete this._listener[s])};this._disposables.push(B.onDidCreateModel(r)),this._disposables.push(B.onWillDisposeModel(a=>{n(a)})),this._disposables.push(B.onDidChangeModelLanguage(a=>{n(a.model),r(a.model)})),this._disposables.push({dispose:()=>{for(const a in this._listener)this._listener[a].dispose()}}),this._disposables.push(t.onDidChange(()=>{B.getModels().forEach(a=>{_t(a)===this.defaults.languageId&&(n(a),r(a))})})),B.getModels().forEach(r)}dispose(){this._disposables.forEach(t=>t==null?void 0:t.dispose()),this._disposables=[]}async _doValidate(t,i,r){var s,o;const n=await this._worker(t),a=await n.doValidation(t.toString());if(B.setModelMarkers(B.getModel(t),i,a),r){if(r.length<1)throw Error("no variables URI strings provided to validate");const c=await n.doGetVariablesJSONSchema(t.toString());if(!c)return;const d={uri:Er.file(r[0].replace(".json","-schema.json")).toString(),schema:c,fileMatch:r};te.json.jsonDefaults.setDiagnosticsOptions({schemaValidation:"error",validate:!0,...(o=(s=this.defaults)==null?void 0:s.diagnosticSettings)==null?void 0:o.jsonDiagnosticSettings,schemas:[d],enableSchemaRequest:!1})}}}const D=te.CompletionItemKind,Dt={[I.Text]:D.Text,[I.Method]:D.Method,[I.Function]:D.Function,[I.Constructor]:D.Constructor,[I.Field]:D.Field,[I.Variable]:D.Variable,[I.Class]:D.Class,[I.Interface]:D.Interface,[I.Module]:D.Module,[I.Property]:D.Property,[I.Unit]:D.Unit,[I.Value]:D.Value,[I.Enum]:D.Enum,[I.Keyword]:D.Keyword,[I.Snippet]:D.Snippet,[I.Color]:D.Color,[I.File]:D.File,[I.Reference]:D.Reference,[I.Folder]:D.Folder,[I.EnumMember]:D.EnumMember,[I.Constant]:D.Constant,[I.Struct]:D.Struct,[I.Event]:D.Event,[I.Operator]:D.Operator,[I.TypeParameter]:D.TypeParameter};function Li(e){return e in Dt?Dt[e]:D.Text}function Ri(e){var i;return{range:e.range,kind:Li(e.kind),label:e.label,insertText:(i=e.insertText)!=null?i:e.label,insertTextRules:e.insertText?te.CompletionItemInsertTextRule.InsertAsSnippet:void 0,sortText:e.sortText,filterText:e.filterText,documentation:e.documentation,detail:e.detail,command:e.command}}class ki{constructor(t){M(this,"_worker");this._worker=t,this._worker=t}get triggerCharacters(){return[":","$",`
`," ","(","@"]}async provideCompletionItems(t,i,r,n){try{const a=t.uri,o=await(await this._worker(t.uri)).doComplete(a.toString(),i);return{incomplete:!0,suggestions:o.map(Ri)}}catch(a){return console.error(`Error fetching completion items

${a}`),{suggestions:[]}}}}class Ci{constructor(t){M(this,"_worker");this._worker=t,this._worker=t}async provideDocumentFormattingEdits(t,i,r){const a=await(await this._worker(t.uri)).doFormat(t.uri.toString());return a?[{range:t.getFullModelRange(),text:a}]:[]}}class Vi{constructor(t){M(this,"_worker");this._worker=t}async provideHover(t,i,r){const n=t.uri,s=await(await this._worker(t.uri)).doHover(n.toString(),i);return s?{range:s.range,contents:[{value:s.content}]}:{contents:[]}}dispose(){}}function Ui(e){const t=[],i=[],r=new Ai(e);t.push(r);const n=(...h)=>{try{return r.getLanguageServiceWorker(...h)}catch{throw Error("Error fetching graphql language service worker")}};function a(){const{modeConfiguration:h}=e;h.documentFormattingEdits&&i.push(te.registerDocumentFormattingEditProvider(e.languageId,new Ci(n)))}function s(h){const{modeConfiguration:m}=e;Xt(i),m.completionItems&&i.push(te.registerCompletionItemProvider(e.languageId,new ki(n))),m.diagnostics&&i.push(new Fi(h,n)),m.hovers&&i.push(te.registerHoverProvider(e.languageId,new Vi(n))),a()}let{modeConfiguration:o,formattingOptions:c,diagnosticSettings:f,externalFragmentDefinitions:d,schemas:g}=e;return s(e),e.onDidChange(h=>{h.modeConfiguration!==o&&(o=h.modeConfiguration,s(h)),h.formattingOptions!==c&&(c=h.formattingOptions,a()),h.externalFragmentDefinitions!==d&&(d=h.externalFragmentDefinitions,s(h)),h.diagnosticSettings!==f&&(f=h.diagnosticSettings,s(h)),h.schemas!==g&&(g=h.schemas,s(h))}),t.push(wt(i)),wt(t)}function wt(e){return{dispose:()=>Xt(e)}}function Xt(e){for(;e.length;)e.pop().dispose()}export{Ui as setupMode};
