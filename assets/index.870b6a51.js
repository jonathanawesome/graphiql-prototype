import{C as Nr,D as Fr}from"./index.192ea3d1.js";function Lr(e,r){return r.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in e)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var fe={},ae=Nr(Fr),gr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.languageWorksByLabel=e.languageWorkAttr=void 0,e.languageWorkAttr=[{label:"editorWorkerService",entry:"monaco-editor/esm/vs/editor/editor.worker"},{label:"css",entry:"monaco-editor/esm/vs/language/css/css.worker"},{label:"html",entry:"monaco-editor/esm/vs/language/html/html.worker"},{label:"json",entry:"monaco-editor/esm/vs/language/json/json.worker"},{label:"typescript",entry:"monaco-editor/esm/vs/language/typescript/ts.worker"}];const r={};e.languageWorksByLabel=r,e.languageWorkAttr.forEach(t=>r[t.label]=t)})(gr);var wr={},He=Object.defineProperty,Wr=Object.defineProperties,Rr=Object.getOwnPropertyDescriptor,Ir=Object.getOwnPropertyDescriptors,Ur=Object.getOwnPropertyNames,tr=Object.getOwnPropertySymbols,pr=Object.prototype.hasOwnProperty,zr=Object.prototype.propertyIsEnumerable,nr=(e,r,t)=>r in e?He(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,lr=(e,r)=>{for(var t in r||(r={}))pr.call(r,t)&&nr(e,t,r[t]);if(tr)for(var t of tr(r))zr.call(r,t)&&nr(e,t,r[t]);return e},ir=(e,r)=>Wr(e,Ir(r)),Jr=(e,r)=>{for(var t in r)He(e,t,{get:r[t],enumerable:!0})},Yr=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Ur(r))!pr.call(e,s)&&s!==t&&He(e,s,{get:()=>r[s],enumerable:!(n=Rr(r,s))||n.enumerable});return e},Vr=e=>Yr(He({},"__esModule",{value:!0}),e),Ce={};Jr(Ce,{analyzeMetafile:()=>yt,analyzeMetafileSync:()=>St,build:()=>mt,buildSync:()=>bt,default:()=>$t,formatMessages:()=>pt,formatMessagesSync:()=>kt,initialize:()=>Et,serve:()=>gt,transform:()=>wt,transformSync:()=>vt,version:()=>ht});var yr=Vr(Ce);function ar(e){let r=n=>{if(n===null)t.write8(0);else if(typeof n=="boolean")t.write8(1),t.write8(+n);else if(typeof n=="number")t.write8(2),t.write32(n|0);else if(typeof n=="string")t.write8(3),t.write(xe(n));else if(n instanceof Uint8Array)t.write8(4),t.write(n);else if(n instanceof Array){t.write8(5),t.write32(n.length);for(let s of n)r(s)}else{let s=Object.keys(n);t.write8(6),t.write32(s.length);for(let a of s)t.write(xe(a)),r(n[a])}},t=new br;return t.write32(0),t.write32(e.id<<1|+!e.isRequest),r(e.value),Xe(t.buf,t.len-4,0),t.buf.subarray(0,t.len)}function Hr(e){let r=()=>{switch(t.read8()){case 0:return null;case 1:return!!t.read8();case 2:return t.read32();case 3:return _e(t.read());case 4:return t.read();case 5:{let i=t.read32(),p=[];for(let o=0;o<i;o++)p.push(r());return p}case 6:{let i=t.read32(),p={};for(let o=0;o<i;o++)p[_e(t.read())]=r();return p}default:throw new Error("Invalid packet")}},t=new br(e),n=t.read32(),s=(n&1)===0;n>>>=1;let a=r();if(t.ptr!==e.length)throw new Error("Invalid packet");return{id:n,isRequest:s,value:a}}var br=class{constructor(e=new Uint8Array(1024)){this.buf=e,this.len=0,this.ptr=0}_write(e){if(this.len+e>this.buf.length){let r=new Uint8Array((this.len+e)*2);r.set(this.buf),this.buf=r}return this.len+=e,this.len-e}write8(e){let r=this._write(1);this.buf[r]=e}write32(e){let r=this._write(4);Xe(this.buf,e,r)}write(e){let r=this._write(4+e.length);Xe(this.buf,e.length,r),this.buf.set(e,r+4)}_read(e){if(this.ptr+e>this.buf.length)throw new Error("Invalid packet");return this.ptr+=e,this.ptr-e}read8(){return this.buf[this._read(1)]}read32(){return vr(this.buf,this._read(4))}read(){let e=this.read32(),r=new Uint8Array(e),t=this._read(r.length);return r.set(this.buf.subarray(t,t+e)),r}},xe,_e;if(typeof TextEncoder!="undefined"&&typeof TextDecoder!="undefined"){let e=new TextEncoder,r=new TextDecoder;xe=t=>e.encode(t),_e=t=>r.decode(t)}else if(typeof Buffer!="undefined")xe=e=>{let r=Buffer.from(e);return r instanceof Uint8Array||(r=new Uint8Array(r)),r},_e=e=>{let{buffer:r,byteOffset:t,byteLength:n}=e;return Buffer.from(r,t,n).toString()};else throw new Error("No UTF-8 codec found");function vr(e,r){return e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24}function Xe(e,r,t){e[t++]=r,e[t++]=r>>8,e[t++]=r>>16,e[t++]=r>>24}function or(e){if(e+="",e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var Re=()=>null,J=e=>typeof e=="boolean"?null:"a boolean",Kr=e=>typeof e=="boolean"||typeof e=="object"&&!Array.isArray(e)?null:"a boolean or an object",y=e=>typeof e=="string"?null:"a string",Ue=e=>e instanceof RegExp?null:"a RegExp object",Me=e=>typeof e=="number"&&e===(e|0)?null:"an integer",Ge=e=>typeof e=="function"?null:"a function",K=e=>Array.isArray(e)?null:"an array",ye=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",qr=e=>e instanceof WebAssembly.Module?null:"a WebAssembly.Module",Qr=e=>typeof e=="object"&&e!==null?null:"an array or an object",sr=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",kr=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",Xr=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",Gr=e=>typeof e=="string"||Array.isArray(e)?null:"a string or an array",Zr=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array";function l(e,r,t,n){let s=e[t];if(r[t+""]=!0,s===void 0)return;let a=n(s);if(a!==null)throw new Error(`"${t}" must be ${a}`);return s}function Q(e,r,t){for(let n in e)if(!(n in r))throw new Error(`Invalid option ${t}: "${n}"`)}function et(e){let r=Object.create(null),t=l(e,r,"wasmURL",y),n=l(e,r,"wasmModule",qr),s=l(e,r,"worker",J);return Q(e,r,"in initialize() call"),{wasmURL:t,wasmModule:n,worker:s}}function Sr(e){let r;if(e!==void 0){r=Object.create(null);for(let t of Object.keys(e)){let n=e[t];if(typeof n=="string"||n===!1)r[t]=n;else throw new Error(`Expected ${JSON.stringify(t)} in mangle cache to map to either a string or false`)}}return r}function ze(e,r,t,n,s){let a=l(r,t,"color",J),i=l(r,t,"logLevel",y),p=l(r,t,"logLimit",Me);a!==void 0?e.push(`--color=${a}`):n&&e.push("--color=true"),e.push(`--log-level=${i||s}`),e.push(`--log-limit=${p||0}`)}function Er(e,r,t){let n=l(r,t,"legalComments",y),s=l(r,t,"sourceRoot",y),a=l(r,t,"sourcesContent",J),i=l(r,t,"target",Gr),p=l(r,t,"format",y),o=l(r,t,"globalName",y),d=l(r,t,"mangleProps",Ue),c=l(r,t,"reserveProps",Ue),b=l(r,t,"mangleQuoted",J),x=l(r,t,"minify",J),P=l(r,t,"minifySyntax",J),j=l(r,t,"minifyWhitespace",J),U=l(r,t,"minifyIdentifiers",J),ee=l(r,t,"drop",K),ce=l(r,t,"charset",y),ie=l(r,t,"treeShaking",J),de=l(r,t,"ignoreAnnotations",J),ge=l(r,t,"jsx",y),be=l(r,t,"jsxFactory",y),we=l(r,t,"jsxFragment",y),ve=l(r,t,"define",ye),Pe=l(r,t,"pure",K),Ae=l(r,t,"keepNames",J);if(n&&e.push(`--legal-comments=${n}`),s!==void 0&&e.push(`--source-root=${s}`),a!==void 0&&e.push(`--sources-content=${a}`),i&&(Array.isArray(i)?e.push(`--target=${Array.from(i).map(or).join(",")}`):e.push(`--target=${or(i)}`)),p&&e.push(`--format=${p}`),o&&e.push(`--global-name=${o}`),x&&e.push("--minify"),P&&e.push("--minify-syntax"),j&&e.push("--minify-whitespace"),U&&e.push("--minify-identifiers"),ce&&e.push(`--charset=${ce}`),ie!==void 0&&e.push(`--tree-shaking=${ie}`),de&&e.push("--ignore-annotations"),ee)for(let g of ee)e.push(`--drop:${g}`);if(d&&e.push(`--mangle-props=${d.source}`),c&&e.push(`--reserve-props=${c.source}`),b!==void 0&&e.push(`--mangle-quoted=${b}`),ge&&e.push(`--jsx=${ge}`),be&&e.push(`--jsx-factory=${be}`),we&&e.push(`--jsx-fragment=${we}`),ve)for(let g in ve){if(g.indexOf("=")>=0)throw new Error(`Invalid define: ${g}`);e.push(`--define:${g}=${ve[g]}`)}if(Pe)for(let g of Pe)e.push(`--pure:${g}`);Ae&&e.push("--keep-names")}function rt(e,r,t,n,s){var a;let i=[],p=[],o=Object.create(null),d=null,c=null,b=null;ze(i,r,o,t,n),Er(i,r,o);let x=l(r,o,"sourcemap",kr),P=l(r,o,"bundle",J),j=l(r,o,"watch",Kr),U=l(r,o,"splitting",J),ee=l(r,o,"preserveSymlinks",J),ce=l(r,o,"metafile",J),ie=l(r,o,"outfile",y),de=l(r,o,"outdir",y),ge=l(r,o,"outbase",y),be=l(r,o,"platform",y),we=l(r,o,"tsconfig",y),ve=l(r,o,"resolveExtensions",K),Pe=l(r,o,"nodePaths",K),Ae=l(r,o,"mainFields",K),g=l(r,o,"conditions",K),h=l(r,o,"external",K),u=l(r,o,"loader",ye),m=l(r,o,"outExtension",ye),W=l(r,o,"publicPath",y),C=l(r,o,"entryNames",y),M=l(r,o,"chunkNames",y),O=l(r,o,"assetNames",y),N=l(r,o,"inject",K),_=l(r,o,"banner",ye),$=l(r,o,"footer",ye),T=l(r,o,"entryPoints",Qr),F=l(r,o,"absWorkingDir",y),D=l(r,o,"stdin",ye),z=(a=l(r,o,"write",J))!=null?a:s,le=l(r,o,"allowOverwrite",J),A=l(r,o,"incremental",J)===!0,v=l(r,o,"mangleCache",ye);if(o.plugins=!0,Q(r,o,`in ${e}() call`),x&&i.push(`--sourcemap${x===!0?"":`=${x}`}`),P&&i.push("--bundle"),le&&i.push("--allow-overwrite"),j)if(i.push("--watch"),typeof j=="boolean")b={};else{let f=Object.create(null),E=l(j,f,"onRebuild",Ge);Q(j,f,`on "watch" in ${e}() call`),b={onRebuild:E}}if(U&&i.push("--splitting"),ee&&i.push("--preserve-symlinks"),ce&&i.push("--metafile"),ie&&i.push(`--outfile=${ie}`),de&&i.push(`--outdir=${de}`),ge&&i.push(`--outbase=${ge}`),be&&i.push(`--platform=${be}`),we&&i.push(`--tsconfig=${we}`),ve){let f=[];for(let E of ve){if(E+="",E.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${E}`);f.push(E)}i.push(`--resolve-extensions=${f.join(",")}`)}if(W&&i.push(`--public-path=${W}`),C&&i.push(`--entry-names=${C}`),M&&i.push(`--chunk-names=${M}`),O&&i.push(`--asset-names=${O}`),Ae){let f=[];for(let E of Ae){if(E+="",E.indexOf(",")>=0)throw new Error(`Invalid main field: ${E}`);f.push(E)}i.push(`--main-fields=${f.join(",")}`)}if(g){let f=[];for(let E of g){if(E+="",E.indexOf(",")>=0)throw new Error(`Invalid condition: ${E}`);f.push(E)}i.push(`--conditions=${f.join(",")}`)}if(h)for(let f of h)i.push(`--external:${f}`);if(_)for(let f in _){if(f.indexOf("=")>=0)throw new Error(`Invalid banner file type: ${f}`);i.push(`--banner:${f}=${_[f]}`)}if($)for(let f in $){if(f.indexOf("=")>=0)throw new Error(`Invalid footer file type: ${f}`);i.push(`--footer:${f}=${$[f]}`)}if(N)for(let f of N)i.push(`--inject:${f}`);if(u)for(let f in u){if(f.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${f}`);i.push(`--loader:${f}=${u[f]}`)}if(m)for(let f in m){if(f.indexOf("=")>=0)throw new Error(`Invalid out extension: ${f}`);i.push(`--out-extension:${f}=${m[f]}`)}if(T)if(Array.isArray(T))for(let f of T)p.push(["",f+""]);else for(let[f,E]of Object.entries(T))p.push([f+"",E+""]);if(D){let f=Object.create(null),E=l(D,f,"contents",y),I=l(D,f,"resolveDir",y),S=l(D,f,"sourcefile",y),w=l(D,f,"loader",y);Q(D,f,'in "stdin" object'),S&&i.push(`--sourcefile=${S}`),w&&i.push(`--loader=${w}`),I&&(c=I+""),d=E?E+"":""}let k=[];if(Pe)for(let f of Pe)f+="",k.push(f);return{entries:p,flags:i,write:z,stdinContents:d,stdinResolveDir:c,absWorkingDir:F,incremental:A,nodePaths:k,watch:b,mangleCache:Sr(v)}}function tt(e,r,t,n){let s=[],a=Object.create(null);ze(s,r,a,t,n),Er(s,r,a);let i=l(r,a,"sourcemap",kr),p=l(r,a,"tsconfigRaw",Xr),o=l(r,a,"sourcefile",y),d=l(r,a,"loader",y),c=l(r,a,"banner",y),b=l(r,a,"footer",y),x=l(r,a,"mangleCache",ye);return Q(r,a,`in ${e}() call`),i&&s.push(`--sourcemap=${i===!0?"external":i}`),p&&s.push(`--tsconfig-raw=${typeof p=="string"?p:JSON.stringify(p)}`),o&&s.push(`--sourcefile=${o}`),d&&s.push(`--loader=${d}`),c&&s.push(`--banner=${c}`),b&&s.push(`--footer=${b}`),{flags:s,mangleCache:Sr(x)}}function xr(e){let r=new Map,t=new Map,n=new Map,s=new Map,a=null,i=0,p=0,o=new Uint8Array(16*1024),d=0,c=g=>{let h=d+g.length;if(h>o.length){let m=new Uint8Array(h*2);m.set(o),o=m}o.set(g,d),d+=g.length;let u=0;for(;u+4<=d;){let m=vr(o,u);if(u+4+m>d)break;u+=4,ee(o.subarray(u,u+m)),u+=m}u>0&&(o.copyWithin(0,u,d),d-=u)},b=g=>{a={reason:g?": "+(g.message||g):""};const h="The service was stopped"+a.reason;for(let u of r.values())u(h,null);r.clear();for(let u of s.values())u.onWait(h);s.clear();for(let u of n.values())try{u(new Error(h),null)}catch(m){console.error(m)}n.clear()},x=(g,h,u)=>{if(a)return u("The service is no longer running"+a.reason,null);let m=i++;r.set(m,(W,C)=>{try{u(W,C)}finally{g&&g.unref()}}),g&&g.ref(),e.writeToStdin(ar({id:m,isRequest:!0,value:h}))},P=(g,h)=>{if(a)throw new Error("The service is no longer running"+a.reason);e.writeToStdin(ar({id:g,isRequest:!1,value:h}))},j=async(g,h)=>{try{switch(h.command){case"ping":{P(g,{});break}case"on-start":{let u=t.get(h.key);u?P(g,await u(h)):P(g,{});break}case"on-resolve":{let u=t.get(h.key);u?P(g,await u(h)):P(g,{});break}case"on-load":{let u=t.get(h.key);u?P(g,await u(h)):P(g,{});break}case"serve-request":{let u=s.get(h.key);u&&u.onRequest&&u.onRequest(h.args),P(g,{});break}case"serve-wait":{let u=s.get(h.key);u&&u.onWait(h.error),P(g,{});break}case"watch-rebuild":{let u=n.get(h.key);try{u&&u(null,h.args)}catch(m){console.error(m)}P(g,{});break}default:throw new Error("Invalid command: "+h.command)}}catch(u){P(g,{errors:[Oe(u,e,null,void 0,"")]})}},U=!0,ee=g=>{if(U){U=!1;let u=String.fromCharCode(...g);if(u!=="0.14.39")throw new Error(`Cannot start service: Host version "0.14.39" does not match binary version ${JSON.stringify(u)}`);return}let h=Hr(g);if(h.isRequest)j(h.id,h.value);else{let u=r.get(h.id);r.delete(h.id),h.value.error?u(h.value.error,{}):u(null,h.value)}},ce=async(g,h,u,m,W)=>{let C=[],M=[],O={},N={},_=0,$=0,T=[],F=!1;h=[...h];for(let A of h){let v={};if(typeof A!="object")throw new Error(`Plugin at index ${$} must be an object`);const k=l(A,v,"name",y);if(typeof k!="string"||k==="")throw new Error(`Plugin at index ${$} is missing a name`);try{let f=l(A,v,"setup",Ge);if(typeof f!="function")throw new Error("Plugin is missing a setup function");Q(A,v,`on plugin ${JSON.stringify(k)}`);let E={name:k,onResolve:[],onLoad:[]};$++;let S=f({initialOptions:g,resolve:(w,L={})=>{if(!F)throw new Error('Cannot call "resolve" before plugin setup has completed');if(typeof w!="string")throw new Error("The path to resolve must be a string");let B=Object.create(null),X=l(L,B,"pluginName",y),Y=l(L,B,"importer",y),H=l(L,B,"namespace",y),re=l(L,B,"resolveDir",y),G=l(L,B,"kind",y),R=l(L,B,"pluginData",Re);return Q(L,B,"in resolve() call"),new Promise((q,Z)=>{const V={command:"resolve",path:w,key:u,pluginName:k};X!=null&&(V.pluginName=X),Y!=null&&(V.importer=Y),H!=null&&(V.namespace=H),re!=null&&(V.resolveDir=re),G!=null&&(V.kind=G),R!=null&&(V.pluginData=m.store(R)),x(W,V,(he,te)=>{he!==null?Z(new Error(he)):q({errors:pe(te.errors,m),warnings:pe(te.warnings,m),path:te.path,external:te.external,sideEffects:te.sideEffects,namespace:te.namespace,suffix:te.suffix,pluginData:m.load(te.pluginData)})})})},onStart(w){let L='This error came from the "onStart" callback registered here:',B=Fe(new Error(L),e,"onStart");C.push({name:k,callback:w,note:B})},onEnd(w){let L='This error came from the "onEnd" callback registered here:',B=Fe(new Error(L),e,"onEnd");M.push({name:k,callback:w,note:B})},onResolve(w,L){let B='This error came from the "onResolve" callback registered here:',X=Fe(new Error(B),e,"onResolve"),Y={},H=l(w,Y,"filter",Ue),re=l(w,Y,"namespace",y);if(Q(w,Y,`in onResolve() call for plugin ${JSON.stringify(k)}`),H==null)throw new Error("onResolve() call is missing a filter");let G=_++;O[G]={name:k,callback:L,note:X},E.onResolve.push({id:G,filter:H.source,namespace:re||""})},onLoad(w,L){let B='This error came from the "onLoad" callback registered here:',X=Fe(new Error(B),e,"onLoad"),Y={},H=l(w,Y,"filter",Ue),re=l(w,Y,"namespace",y);if(Q(w,Y,`in onLoad() call for plugin ${JSON.stringify(k)}`),H==null)throw new Error("onLoad() call is missing a filter");let G=_++;N[G]={name:k,callback:L,note:X},E.onLoad.push({id:G,filter:H.source,namespace:re||""})},esbuild:e.esbuild});S&&await S,T.push(E)}catch(f){return{ok:!1,error:f,pluginName:k}}}const D=async A=>{switch(A.command){case"on-start":{let v={errors:[],warnings:[]};return await Promise.all(C.map(async({name:k,callback:f,note:E})=>{try{let I=await f();if(I!=null){if(typeof I!="object")throw new Error(`Expected onStart() callback in plugin ${JSON.stringify(k)} to return an object`);let S={},w=l(I,S,"errors",K),L=l(I,S,"warnings",K);Q(I,S,`from onStart() callback in plugin ${JSON.stringify(k)}`),w!=null&&v.errors.push(...ke(w,"errors",m,k)),L!=null&&v.warnings.push(...ke(L,"warnings",m,k))}}catch(I){v.errors.push(Oe(I,e,m,E&&E(),k))}})),v}case"on-resolve":{let v={},k="",f,E;for(let I of A.ids)try{({name:k,callback:f,note:E}=O[I]);let S=await f({path:A.path,importer:A.importer,namespace:A.namespace,resolveDir:A.resolveDir,kind:A.kind,pluginData:m.load(A.pluginData)});if(S!=null){if(typeof S!="object")throw new Error(`Expected onResolve() callback in plugin ${JSON.stringify(k)} to return an object`);let w={},L=l(S,w,"pluginName",y),B=l(S,w,"path",y),X=l(S,w,"namespace",y),Y=l(S,w,"suffix",y),H=l(S,w,"external",J),re=l(S,w,"sideEffects",J),G=l(S,w,"pluginData",Re),R=l(S,w,"errors",K),q=l(S,w,"warnings",K),Z=l(S,w,"watchFiles",K),V=l(S,w,"watchDirs",K);Q(S,w,`from onResolve() callback in plugin ${JSON.stringify(k)}`),v.id=I,L!=null&&(v.pluginName=L),B!=null&&(v.path=B),X!=null&&(v.namespace=X),Y!=null&&(v.suffix=Y),H!=null&&(v.external=H),re!=null&&(v.sideEffects=re),G!=null&&(v.pluginData=m.store(G)),R!=null&&(v.errors=ke(R,"errors",m,k)),q!=null&&(v.warnings=ke(q,"warnings",m,k)),Z!=null&&(v.watchFiles=Le(Z,"watchFiles")),V!=null&&(v.watchDirs=Le(V,"watchDirs"));break}}catch(S){return{id:I,errors:[Oe(S,e,m,E&&E(),k)]}}return v}case"on-load":{let v={},k="",f,E;for(let I of A.ids)try{({name:k,callback:f,note:E}=N[I]);let S=await f({path:A.path,namespace:A.namespace,suffix:A.suffix,pluginData:m.load(A.pluginData)});if(S!=null){if(typeof S!="object")throw new Error(`Expected onLoad() callback in plugin ${JSON.stringify(k)} to return an object`);let w={},L=l(S,w,"pluginName",y),B=l(S,w,"contents",Zr),X=l(S,w,"resolveDir",y),Y=l(S,w,"pluginData",Re),H=l(S,w,"loader",y),re=l(S,w,"errors",K),G=l(S,w,"warnings",K),R=l(S,w,"watchFiles",K),q=l(S,w,"watchDirs",K);Q(S,w,`from onLoad() callback in plugin ${JSON.stringify(k)}`),v.id=I,L!=null&&(v.pluginName=L),B instanceof Uint8Array?v.contents=B:B!=null&&(v.contents=xe(B)),X!=null&&(v.resolveDir=X),Y!=null&&(v.pluginData=m.store(Y)),H!=null&&(v.loader=H),re!=null&&(v.errors=ke(re,"errors",m,k)),G!=null&&(v.warnings=ke(G,"warnings",m,k)),R!=null&&(v.watchFiles=Le(R,"watchFiles")),q!=null&&(v.watchDirs=Le(q,"watchDirs"));break}}catch(S){return{id:I,errors:[Oe(S,e,m,E&&E(),k)]}}return v}default:throw new Error("Invalid command: "+A.command)}};let z=(A,v,k)=>k();M.length>0&&(z=(A,v,k)=>{(async()=>{for(const{name:f,callback:E,note:I}of M)try{await E(A)}catch(S){A.errors.push(await new Promise(w=>v(S,f,I&&I(),w)))}})().then(k)}),F=!0;let le=0;return{ok:!0,requestPlugins:T,runOnEndCallbacks:z,pluginRefs:{ref(){++le===1&&t.set(u,D)},unref(){--le===0&&t.delete(u)}}}},ie=(g,h,u,m)=>{let W={},C=l(h,W,"port",Me),M=l(h,W,"host",y),O=l(h,W,"servedir",y),N=l(h,W,"onRequest",Ge),_,$=new Promise((T,F)=>{_=D=>{s.delete(m),D!==null?F(new Error(D)):T()}});return u.serve={},Q(h,W,"in serve() call"),C!==void 0&&(u.serve.port=C),M!==void 0&&(u.serve.host=M),O!==void 0&&(u.serve.servedir=O),s.set(m,{onRequest:N,onWait:_}),{wait:$,stop(){x(g,{command:"serve-stop",key:m},()=>{})}}};const de="warning",ge="silent";let be=g=>{let h=p++;const u=ur();let m,{refs:W,options:C,isTTY:M,callback:O}=g;if(typeof C=="object"){let $=C.plugins;if($!==void 0){if(!Array.isArray($))throw new Error('"plugins" must be an array');m=$}}let N=($,T,F,D)=>{let z=[];try{ze(z,C,{},M,de)}catch{}const le=Oe($,e,u,F,T);x(W,{command:"error",flags:z,error:le},()=>{le.detail=u.load(le.detail),D(le)})},_=($,T)=>{N($,T,void 0,F=>{O(De("Build failed",[F],[]),null)})};if(m&&m.length>0){if(e.isSync)return _(new Error("Cannot use plugins in synchronous API calls"),"");ce(C,m,h,u,W).then($=>{if(!$.ok)_($.error,$.pluginName);else try{we(ir(lr({},g),{key:h,details:u,logPluginError:N,requestPlugins:$.requestPlugins,runOnEndCallbacks:$.runOnEndCallbacks,pluginRefs:$.pluginRefs}))}catch(T){_(T,"")}},$=>_($,""))}else try{we(ir(lr({},g),{key:h,details:u,logPluginError:N,requestPlugins:null,runOnEndCallbacks:($,T,F)=>F(),pluginRefs:null}))}catch($){_($,"")}},we=({callName:g,refs:h,serveOptions:u,options:m,isTTY:W,defaultWD:C,callback:M,key:O,details:N,logPluginError:_,requestPlugins:$,runOnEndCallbacks:T,pluginRefs:F})=>{const D={ref(){F&&F.ref(),h&&h.ref()},unref(){F&&F.unref(),h&&h.unref()}};let z=!e.isBrowser,{entries:le,flags:A,write:v,stdinContents:k,stdinResolveDir:f,absWorkingDir:E,incremental:I,nodePaths:S,watch:w,mangleCache:L}=rt(g,m,W,de,z),B={command:"build",key:O,entries:le,flags:A,write:v,stdinContents:k,stdinResolveDir:f,absWorkingDir:E||C,incremental:I,nodePaths:S};$&&(B.plugins=$),L&&(B.mangleCache=L);let X=u&&ie(D,u,B,O),Y,H,re=(R,q)=>{R.outputFiles&&(q.outputFiles=R.outputFiles.map(nt)),R.metafile&&(q.metafile=JSON.parse(R.metafile)),R.mangleCache&&(q.mangleCache=R.mangleCache),R.writeToStdout!==void 0&&console.log(_e(R.writeToStdout).replace(/\n$/,""))},G=(R,q)=>{let Z={errors:pe(R.errors,N),warnings:pe(R.warnings,N)};re(R,Z),T(Z,_,()=>{if(Z.errors.length>0)return q(De("Build failed",Z.errors,Z.warnings),null);if(R.rebuild){if(!Y){let V=!1;Y=()=>new Promise((he,te)=>{if(V||a)throw new Error("Cannot rebuild");x(D,{command:"rebuild",key:O},(ue,Br)=>{if(ue)return q(De("Build failed",[{pluginName:"",text:ue,location:null,notes:[],detail:void 0}],[]),null);G(Br,(Qe,Cr)=>{Qe?te(Qe):he(Cr)})})}),D.ref(),Y.dispose=()=>{V||(V=!0,x(D,{command:"rebuild-dispose",key:O},()=>{}),D.unref())}}Z.rebuild=Y}if(R.watch){if(!H){let V=!1;D.ref(),H=()=>{V||(V=!0,n.delete(O),x(D,{command:"watch-stop",key:O},()=>{}),D.unref())},w&&n.set(O,(he,te)=>{if(he){w.onRebuild&&w.onRebuild(he,null);return}let ue={errors:pe(te.errors,N),warnings:pe(te.warnings,N)};re(te,ue),T(ue,_,()=>{if(ue.errors.length>0){w.onRebuild&&w.onRebuild(De("Build failed",ue.errors,ue.warnings),null);return}te.rebuildID!==void 0&&(ue.rebuild=Y),ue.stop=H,w.onRebuild&&w.onRebuild(null,ue)})})}Z.stop=H}q(null,Z)})};if(v&&e.isBrowser)throw new Error('Cannot enable "write" in the browser');if(I&&e.isSync)throw new Error('Cannot use "incremental" with a synchronous build');if(w&&e.isSync)throw new Error('Cannot use "watch" with a synchronous build');x(D,B,(R,q)=>{if(R)return M(new Error(R),null);if(X){let Z=q,V=!1;D.ref();let he={port:Z.port,host:Z.host,wait:X.wait,stop(){V||(V=!0,X.stop(),D.unref())}};return D.ref(),X.wait.then(D.unref,D.unref),M(null,he)}return G(q,M)})};return{readFromStdout:c,afterClose:b,service:{buildOrServe:be,transform:({callName:g,refs:h,input:u,options:m,isTTY:W,fs:C,callback:M})=>{const O=ur();let N=_=>{try{if(typeof u!="string")throw new Error('The input to "transform" must be a string');let{flags:$,mangleCache:T}=tt(g,m,W,ge),F={command:"transform",flags:$,inputFS:_!==null,input:_!==null?_:u};T&&(F.mangleCache=T),x(h,F,(D,z)=>{if(D)return M(new Error(D),null);let le=pe(z.errors,O),A=pe(z.warnings,O),v=1,k=()=>{if(--v===0){let f={warnings:A,code:z.code,map:z.map};z.mangleCache&&(f.mangleCache=z==null?void 0:z.mangleCache),M(null,f)}};if(le.length>0)return M(De("Transform failed",le,A),null);z.codeFS&&(v++,C.readFile(z.code,(f,E)=>{f!==null?M(f,null):(z.code=E,k())})),z.mapFS&&(v++,C.readFile(z.map,(f,E)=>{f!==null?M(f,null):(z.map=E,k())})),k()})}catch($){let T=[];try{ze(T,m,{},W,ge)}catch{}const F=Oe($,e,O,void 0,"");x(h,{command:"error",flags:T,error:F},()=>{F.detail=O.load(F.detail),M(De("Transform failed",[F],[]),null)})}};if(typeof u=="string"&&u.length>1024*1024){let _=N;N=()=>C.writeFile(u,_)}N(null)},formatMessages:({callName:g,refs:h,messages:u,options:m,callback:W})=>{let C=ke(u,"messages",null,"");if(!m)throw new Error(`Missing second argument in ${g}() call`);let M={},O=l(m,M,"kind",y),N=l(m,M,"color",J),_=l(m,M,"terminalWidth",Me);if(Q(m,M,`in ${g}() call`),O===void 0)throw new Error(`Missing "kind" in ${g}() call`);if(O!=="error"&&O!=="warning")throw new Error(`Expected "kind" to be "error" or "warning" in ${g}() call`);let $={command:"format-msgs",messages:C,isWarning:O==="warning"};N!==void 0&&($.color=N),_!==void 0&&($.terminalWidth=_),x(h,$,(T,F)=>{if(T)return W(new Error(T),null);W(null,F.messages)})},analyzeMetafile:({callName:g,refs:h,metafile:u,options:m,callback:W})=>{m===void 0&&(m={});let C={},M=l(m,C,"color",J),O=l(m,C,"verbose",J);Q(m,C,`in ${g}() call`);let N={command:"analyze-metafile",metafile:u};M!==void 0&&(N.color=M),O!==void 0&&(N.verbose=O),x(h,N,(_,$)=>{if(_)return W(new Error(_),null);W(null,$.result)})}}}}function ur(){const e=new Map;let r=0;return{load(t){return e.get(t)},store(t){if(t===void 0)return-1;const n=r++;return e.set(n,t),n}}}function Fe(e,r,t){let n,s=!1;return()=>{if(s)return n;s=!0;try{let a=(e.stack+"").split(`
`);a.splice(1,1);let i=$r(r,a,t);if(i)return n={text:e.message,location:i},n}catch{}}}function Oe(e,r,t,n,s){let a="Internal error",i=null;try{a=(e&&e.message||e)+""}catch{}try{i=$r(r,(e.stack+"").split(`
`),"")}catch{}return{pluginName:s,text:a,location:i,notes:n?[n]:[],detail:t?t.store(e):-1}}function $r(e,r,t){let n="    at ";if(e.readFileSync&&!r[0].startsWith(n)&&r[1].startsWith(n))for(let s=1;s<r.length;s++){let a=r[s];if(!!a.startsWith(n))for(a=a.slice(n.length);;){let i=/^(?:new |async )?\S+ \((.*)\)$/.exec(a);if(i){a=i[1];continue}if(i=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(a),i){a=i[1];continue}if(i=/^(\S+):(\d+):(\d+)$/.exec(a),i){let p;try{p=e.readFileSync(i[1],"utf8")}catch{break}let o=p.split(/\r\n|\r|\n|\u2028|\u2029/)[+i[2]-1]||"",d=+i[3]-1,c=o.slice(d,d+t.length)===t?t.length:0;return{file:i[1],namespace:"file",line:+i[2],column:xe(o.slice(0,d)).length,length:xe(o.slice(d,d+c)).length,lineText:o+`
`+r.slice(1).join(`
`),suggestion:""}}break}}return null}function De(e,r,t){let n=5,s=r.length<1?"":` with ${r.length} error${r.length<2?"":"s"}:`+r.slice(0,n+1).map((i,p)=>{if(p===n)return`
...`;if(!i.location)return`
error: ${i.text}`;let{file:o,line:d,column:c}=i.location,b=i.pluginName?`[plugin: ${i.pluginName}] `:"";return`
${o}:${d}:${c}: ERROR: ${b}${i.text}`}).join(""),a=new Error(`${e}${s}`);return a.errors=r,a.warnings=t,a}function pe(e,r){for(const t of e)t.detail=r.load(t.detail);return e}function cr(e,r){if(e==null)return null;let t={},n=l(e,t,"file",y),s=l(e,t,"namespace",y),a=l(e,t,"line",Me),i=l(e,t,"column",Me),p=l(e,t,"length",Me),o=l(e,t,"lineText",y),d=l(e,t,"suggestion",y);return Q(e,t,r),{file:n||"",namespace:s||"",line:a||0,column:i||0,length:p||0,lineText:o||"",suggestion:d||""}}function ke(e,r,t,n){let s=[],a=0;for(const i of e){let p={},o=l(i,p,"pluginName",y),d=l(i,p,"text",y),c=l(i,p,"location",sr),b=l(i,p,"notes",K),x=l(i,p,"detail",Re),P=`in element ${a} of "${r}"`;Q(i,p,P);let j=[];if(b)for(const U of b){let ee={},ce=l(U,ee,"text",y),ie=l(U,ee,"location",sr);Q(U,ee,P),j.push({text:ce||"",location:cr(ie,P)})}s.push({pluginName:o||n,text:d||"",location:cr(c,P),notes:j,detail:t?t.store(x):-1}),a++}return s}function Le(e,r){const t=[];for(const n of e){if(typeof n!="string")throw new Error(`${JSON.stringify(r)} must be an array of strings`);t.push(n)}return t}function nt({path:e,contents:r}){let t=null;return{path:e,contents:r,get text(){return t===null&&(t=_e(r)),t}}}var je=ae,fr=ae,oe=ae,Je={}.ESBUILD_BINARY_PATH||Je,Ye={"win32 arm64 LE":"esbuild-windows-arm64","win32 ia32 LE":"esbuild-windows-32","win32 x64 LE":"esbuild-windows-64"},Ve={"android arm64 LE":"esbuild-android-arm64","darwin arm64 LE":"esbuild-darwin-arm64","darwin x64 LE":"esbuild-darwin-64","freebsd arm64 LE":"esbuild-freebsd-arm64","freebsd x64 LE":"esbuild-freebsd-64","linux arm LE":"esbuild-linux-arm","linux arm64 LE":"esbuild-linux-arm64","linux ia32 LE":"esbuild-linux-32","linux mips64el LE":"esbuild-linux-mips64le","linux ppc64 LE":"esbuild-linux-ppc64le","linux riscv64 LE":"esbuild-linux-riscv64","linux s390x BE":"esbuild-linux-s390x","linux x64 LE":"esbuild-linux-64","netbsd x64 LE":"esbuild-netbsd-64","openbsd x64 LE":"esbuild-openbsd-64","sunos x64 LE":"esbuild-sunos-64"},dr={"android x64 LE":"esbuild-android-64"};function lt(){let e,r,t=!1,n=`${process.platform} ${fr.arch()} ${fr.endianness()}`;if(n in Ye)e=Ye[n],r="esbuild.exe";else if(n in Ve)e=Ve[n],r="bin/esbuild";else if(n in dr)e=dr[n],r="bin/esbuild",t=!0;else throw new Error(`Unsupported platform: ${n}`);return{pkg:e,subpath:r,isWASM:t}}function it(){const e=require.resolve("esbuild"),r=oe.dirname(oe.dirname(oe.dirname(e)));if(oe.basename(r)==="node_modules"){for(const t in Ve)try{const n=Ve[t];if(je.existsSync(oe.join(r,n)))return n}catch{}for(const t in Ye)try{const n=Ye[t];if(je.existsSync(oe.join(r,n)))return n}catch{}}return null}function at(e,r){const t=oe.dirname(require.resolve("esbuild"));return oe.join(t,`downloaded-${e}-${oe.basename(r)}`)}function ot(){if(Je)return{binPath:Je,isWASM:!1};const{pkg:e,subpath:r,isWASM:t}=lt();let n;try{n=require.resolve(`${e}/${r}`)}catch(a){if(n=at(e,r),!je.existsSync(n)){try{require.resolve(e)}catch{const i=it();throw i?new Error(`
You installed esbuild on another platform than the one you're currently using.
This won't work because esbuild is written with native code and needs to
install a platform-specific binary executable.

Specifically the "${i}" package is present but this platform
needs the "${e}" package instead. People often get into this
situation by installing esbuild on Windows or macOS and copying "node_modules"
into a Docker image that runs Linux, or by copying "node_modules" between
Windows and WSL environments.

If you are installing with npm, you can try not copying the "node_modules"
directory when you copy the files over, and running "npm ci" or "npm install"
on the destination platform after the copy. Or you could consider using yarn
instead which has built-in support for installing a package on multiple
platforms simultaneously.

If you are installing with yarn, you can try listing both this platform and the
other platform in your ".yarnrc.yml" file using the "supportedArchitectures"
feature: https://yarnpkg.com/configuration/yarnrc/#supportedArchitectures
Keep in mind that this means multiple copies of esbuild will be present.

Another alternative is to use the "esbuild-wasm" package instead, which works
the same way on all platforms. But it comes with a heavy performance cost and
can sometimes be 10x slower than the "esbuild" package, so you may also not
want to do that.
`):new Error(`The package "${e}" could not be found, and is needed by esbuild.

If you are installing esbuild with npm, make sure that you don't specify the
"--no-optional" flag. The "optionalDependencies" package.json feature is used
by esbuild to install the correct binary executable for your current platform.`)}throw a}}let s=!1;try{require("pnpapi"),s=!0}catch{}if(s){const a=oe.dirname(require.resolve("esbuild")),i=oe.join(a,`pnpapi-${e}-${oe.basename(r)}`);return je.existsSync(i)||(je.copyFileSync(n,i),je.chmodSync(i,493)),{binPath:i,isWASM:t}}return{binPath:n,isWASM:t}}var Pr=ae,st=ae,Ze=ae,Se=ae,ut=ae,ct=ae,ne;if({}.ESBUILD_WORKER_THREADS!=="0"){try{ne=require("worker_threads")}catch{}let[e,r]=process.versions.node.split(".");(+e<12||+e==12&&+r<17||+e==13&&+r<13)&&(ne=void 0)}var hr,Ne=((hr=ne==null?void 0:ne.workerData)==null?void 0:hr.esbuildVersion)==="0.14.39",Or=()=>{if((!Je||!1)&&(Ze.basename(__filename)!=="main.js"||Ze.basename(__dirname)!=="lib"))throw new Error(`The esbuild JavaScript API cannot be bundled. Please mark the "esbuild" package as external so it's not included in the bundle.

More information: The file containing the code for esbuild's JavaScript API (${__filename}) does not appear to be inside the esbuild package on the file system, which usually means that the esbuild package was bundled into another file. This is problematic because the API needs to run a binary executable inside the esbuild package which is located using a relative path from the API code to the executable. If the esbuild package is bundled, the relative path will be incorrect and the executable won't be found.`);const{binPath:e,isWASM:r}=ot();return r?["node",[e]]:[e,[]]},Be=()=>ct.isatty(2),ft={readFile(e,r){try{let t=Se.readFileSync(e,"utf8");try{Se.unlinkSync(e)}catch{}r(null,t)}catch(t){r(t,null)}},writeFile(e,r){try{let t=Dr();Se.writeFileSync(t,e),r(t)}catch{r(null)}}},dt={readFile(e,r){try{Se.readFile(e,"utf8",(t,n)=>{try{Se.unlink(e,()=>r(t,n))}catch{r(t,n)}})}catch(t){r(t,null)}},writeFile(e,r){try{let t=Dr();Se.writeFile(t,e,n=>r(n!==null?null:t))}catch{r(null)}}},ht="0.14.39",mt=e=>$e().build(e),gt=(e,r)=>$e().serve(e,r),wt=(e,r)=>$e().transform(e,r),pt=(e,r)=>$e().formatMessages(e,r),yt=(e,r)=>$e().analyzeMetafile(e,r),bt=e=>{if(ne&&!Ne)return se||(se=qe(ne)),se.buildSync(e);let r;return Ke(t=>t.buildOrServe({callName:"buildSync",refs:null,serveOptions:null,options:e,isTTY:Be(),defaultWD:Ee,callback:(n,s)=>{if(n)throw n;r=s}})),r},vt=(e,r)=>{if(ne&&!Ne)return se||(se=qe(ne)),se.transformSync(e,r);let t;return Ke(n=>n.transform({callName:"transformSync",refs:null,input:e,options:r||{},isTTY:Be(),fs:ft,callback:(s,a)=>{if(s)throw s;t=a}})),t},kt=(e,r)=>{if(ne&&!Ne)return se||(se=qe(ne)),se.formatMessagesSync(e,r);let t;return Ke(n=>n.formatMessages({callName:"formatMessagesSync",refs:null,messages:e,options:r,callback:(s,a)=>{if(s)throw s;t=a}})),t},St=(e,r)=>{if(ne&&!Ne)return se||(se=qe(ne)),se.analyzeMetafileSync(e,r);let t;return Ke(n=>n.analyzeMetafile({callName:"analyzeMetafileSync",refs:null,metafile:typeof e=="string"?e:JSON.stringify(e),options:r,callback:(s,a)=>{if(s)throw s;t=a}})),t},mr=!1,Et=e=>{if(e=et(e||{}),e.wasmURL)throw new Error('The "wasmURL" option only works in the browser');if(e.worker)throw new Error('The "worker" option only works in the browser');if(mr)throw new Error('Cannot call "initialize" more than once');return $e(),mr=!0,Promise.resolve()},Ee=process.cwd(),We,$e=()=>{if(We)return We;let[e,r]=Or(),t=Pr.spawn(e,r.concat("--service=0.14.39","--ping"),{windowsHide:!0,stdio:["pipe","pipe","inherit"],cwd:Ee}),{readFromStdout:n,afterClose:s,service:a}=xr({writeToStdin(c){t.stdin.write(c,b=>{b&&s(b)})},readFileSync:Se.readFileSync,isSync:!1,isBrowser:!1,esbuild:Ce});t.stdin.on("error",s),t.on("error",s);const i=t.stdin,p=t.stdout;p.on("data",n),p.on("end",s);let o=0;t.unref(),i.unref&&i.unref(),p.unref&&p.unref();const d={ref(){++o===1&&t.ref()},unref(){--o===0&&t.unref()}};return We={build:c=>new Promise((b,x)=>{a.buildOrServe({callName:"build",refs:d,serveOptions:null,options:c,isTTY:Be(),defaultWD:Ee,callback:(P,j)=>P?x(P):b(j)})}),serve:(c,b)=>{if(c===null||typeof c!="object")throw new Error("The first argument must be an object");return new Promise((x,P)=>a.buildOrServe({callName:"serve",refs:d,serveOptions:c,options:b,isTTY:Be(),defaultWD:Ee,callback:(j,U)=>j?P(j):x(U)}))},transform:(c,b)=>new Promise((x,P)=>a.transform({callName:"transform",refs:d,input:c,options:b||{},isTTY:Be(),fs:dt,callback:(j,U)=>j?P(j):x(U)})),formatMessages:(c,b)=>new Promise((x,P)=>a.formatMessages({callName:"formatMessages",refs:d,messages:c,options:b,callback:(j,U)=>j?P(j):x(U)})),analyzeMetafile:(c,b)=>new Promise((x,P)=>a.analyzeMetafile({callName:"analyzeMetafile",refs:d,metafile:typeof c=="string"?c:JSON.stringify(c),options:b,callback:(j,U)=>j?P(j):x(U)}))},We},Ke=e=>{let[r,t]=Or(),n=new Uint8Array,{readFromStdout:s,afterClose:a,service:i}=xr({writeToStdin(o){if(n.length!==0)throw new Error("Must run at most one command");n=o},isSync:!0,isBrowser:!1,esbuild:Ce});e(i);let p=Pr.execFileSync(r,t.concat("--service=0.14.39"),{cwd:Ee,windowsHide:!0,input:n,maxBuffer:+{}.ESBUILD_MAX_BUFFER||16*1024*1024});s(p),a(null)},Dr=()=>Ze.join(ut.tmpdir(),`esbuild-${st.randomBytes(32).toString("hex")}`),se=null,qe=e=>{let{port1:r,port2:t}=new e.MessageChannel,n=new e.Worker(__filename,{workerData:{workerPort:t,defaultWD:Ee,esbuildVersion:"0.14.39"},transferList:[t],execArgv:[]}),s=0,a=d=>{let c=new Error(`Build failed with 1 error:
error: ${d}`),b=[{pluginName:"",text:d,location:null,notes:[],detail:void 0}];return c.errors=b,c.warnings=[],c},i=d=>{if(!d)return;let c=d.plugins,b=d.incremental,x=d.watch;if(c&&c.length>0)throw a("Cannot use plugins in synchronous API calls");if(b)throw a('Cannot use "incremental" with a synchronous build');if(x)throw a('Cannot use "watch" with a synchronous build')},p=(d,c)=>{for(let b in c)d[b]=c[b]},o=(d,c)=>{let b=s++,x=new SharedArrayBuffer(8),P=new Int32Array(x),j={sharedBuffer:x,id:b,command:d,args:c};n.postMessage(j);let U=Atomics.wait(P,0,0);if(U!=="ok"&&U!=="not-equal")throw new Error("Internal error: Atomics.wait() failed: "+U);let{message:{id:ee,resolve:ce,reject:ie,properties:de}}=e.receiveMessageOnPort(r);if(b!==ee)throw new Error(`Internal error: Expected id ${b} but got id ${ee}`);if(ie)throw p(ie,de),ie;return ce};return n.unref(),{buildSync(d){return i(d),o("build",[d])},transformSync(d,c){return o("transform",[d,c])},formatMessagesSync(d,c){return o("formatMessages",[d,c])},analyzeMetafileSync(d,c){return o("analyzeMetafile",[d,c])}}},xt=()=>{let e=ne.workerData.workerPort,r=ne.parentPort,t=$e();Ee=ne.workerData.defaultWD;let n=s=>{let a={};if(s&&typeof s=="object")for(let i in s)a[i]=s[i];return a};r.on("message",s=>{(async()=>{let{sharedBuffer:a,id:i,command:p,args:o}=s,d=new Int32Array(a);try{switch(p){case"build":e.postMessage({id:i,resolve:await t.build(o[0])});break;case"transform":e.postMessage({id:i,resolve:await t.transform(o[0],o[1])});break;case"formatMessages":e.postMessage({id:i,resolve:await t.formatMessages(o[0],o[1])});break;case"analyzeMetafile":e.postMessage({id:i,resolve:await t.analyzeMetafile(o[0],o[1])});break;default:throw new Error(`Invalid command: ${p}`)}}catch(c){e.postMessage({id:i,reject:c,properties:n(c)})}Atomics.add(d,0,1),Atomics.notify(d,0,1/0)})()})};Ne&&xt();var $t=Ce;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.workerMiddleware=e.getWorkPath=e.cacheDir=e.getFilenameByEntry=void 0;const r=fe,t=yr,n=ae,s=ae;function a(o){return o=s.basename(o,"js"),o+".bundle.js"}e.getFilenameByEntry=a,e.cacheDir="node_modules/.monaco/";function i(o,d){const c={};for(const b of o)r.isCDN(d.publicPath)?c[b.label]=d.publicPath+"/"+a(b.entry):c[b.label]="/"+d.publicPath+"/"+a(b.entry);return c.typescript&&(c.javascript=c.typescript),c.css&&(c.less=c.css,c.scss=c.css),c.html&&(c.handlebars=c.html,c.razor=c.html),c}e.getWorkPath=i;function p(o,d,c){const b=r.getWorks(c);n.existsSync(e.cacheDir)&&n.rmdirSync(e.cacheDir,{recursive:!0,force:!0});for(const x of b)console.log(d.base+c.publicPath+"/"+a(x.entry)),o.use(d.base+c.publicPath+"/"+a(x.entry),function(P,j,U){n.existsSync(e.cacheDir+a(x.entry))||t.buildSync({entryPoints:[r.resolveMonacoPath(x.entry)],bundle:!0,outfile:e.cacheDir+a(x.entry)});const ee=n.readFileSync(e.cacheDir+a(x.entry));j.setHeader("Content-Type","text/javascript"),j.end(ee)})}e.workerMiddleware=p})(wr);Object.defineProperty(fe,"__esModule",{value:!0});var jr=fe.isCDN=Tr=fe.getWorks=Ar=fe.resolveMonacoPath=void 0;const Ie=ae,Te=ae,Mr=gr,me=wr,Pt=yr;function _r(e){try{return require.resolve(Ie.join(process.cwd(),"node_modules",e))}catch{return require.resolve(e)}}var Ar=fe.resolveMonacoPath=_r;function er(e){let r=e.languageWorkers.map(t=>Mr.languageWorksByLabel[t]);return r.push(...e.customWorkers),r}var Tr=fe.getWorks=er;function Ot(e={}){const r=e.languageWorkers||Object.keys(Mr.languageWorksByLabel),t=e.publicPath||"monacoeditorwork",n=e.globalAPI||!1,s=e.customWorkers||[];e={languageWorkers:r,publicPath:t,globalAPI:n,customWorkers:s};let a;return{name:"vite-plugin-moncao-editor",configResolved(i){a=i},configureServer(i){rr(t)||me.workerMiddleware(i.middlewares,a,e)},transformIndexHtml(i){const p=er(e),o=me.getWorkPath(p,e),d={MonacoEnvironment:`(function (paths) {
          return {
            globalAPI: ${n},
            getWorkerUrl : function (moduleId, label) {
              var result =  paths[label];
              if (/^((http:)|(https:)|(file:)|(\\/\\/))/.test(result)) {
                var currentUrl = String(window.location);
                var currentOrigin = currentUrl.substr(0, currentUrl.length - window.location.hash.length - window.location.search.length - window.location.pathname.length);
                if (result.substring(0, currentOrigin.length) !== currentOrigin) {
                  var js = '/*' + label + '*/importScripts("' + result + '");';
                  var blob = new Blob([js], { type: 'application/javascript' });
                  return URL.createObjectURL(blob);
                }
              }
              return result;
            }
          };
        })(${JSON.stringify(o,null,2)})`};return[{tag:"script",children:Object.keys(d).map(b=>`self[${JSON.stringify(b)}] = ${d[b]};`).join(`
`),injectTo:"head-prepend"}]},writeBundle(){if(rr(t))return;const i=er(e),p=Ie.resolve(a.root,a.build.outDir,e.publicPath);Te.existsSync(p)||Te.mkdirSync(Ie.resolve(a.root,a.build.outDir,e.publicPath),{recursive:!0});for(const o of i){Te.existsSync(me.cacheDir+me.getFilenameByEntry(o.entry))||Pt.buildSync({entryPoints:[_r(o.entry)],bundle:!0,outfile:me.cacheDir+me.getFilenameByEntry(o.entry)});const d=Te.readFileSync(me.cacheDir+me.getFilenameByEntry(o.entry)),c=Ie.resolve(a.root,a.build.outDir,e.publicPath,me.getFilenameByEntry(o.entry));Te.writeFileSync(c,d)}}}}var Dt=fe.default=Ot;function rr(e){return!!/^((http:)|(https:)|(file:)|(\/\/))/.test(e)}jr=fe.isCDN=rr;var Mt=Lr({__proto__:null,get isCDN(){return jr},get getWorks(){return Tr},get resolveMonacoPath(){return Ar},default:Dt},[fe]);export{Mt as i};
